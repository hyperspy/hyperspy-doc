

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Loading and saving data &mdash; HyperSpy 1.4.2 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/hyperspy.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Events" href="events.html" />
    <link rel="prev" title="Electron Holography" href="electron_holography.html" />
 
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-25260850-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> HyperSpy
          

          
            
            <img src="../_static/hyperspy_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.4.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">HyperSpy User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="what_is_new.html">What’s new</a></li>
<li class="toctree-l2"><a class="reference internal" href="what_is_new.html#changelog">Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html">Installing HyperSpy</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html">Tools: the Signal class</a></li>
<li class="toctree-l2"><a class="reference internal" href="signal1d.html">Signal1D Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="signal2d.html">Signal2D Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="visualisation.html">Data visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="mva.html">Machine learning</a></li>
<li class="toctree-l2"><a class="reference internal" href="model.html">Model fitting</a></li>
<li class="toctree-l2"><a class="reference internal" href="eels.html">Electron Energy Loss Spectroscopy</a></li>
<li class="toctree-l2"><a class="reference internal" href="eds.html">Energy-Dispersive X-ray Spectrometry (EDS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="dielectric_function.html">Dielectric function tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="electron_holography.html">Electron Holography</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Loading and saving data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#loading-files-the-load-function">Loading files: the load function</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#loading-multiple-files">Loading multiple files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#saving-data-to-files">Saving data to files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#supported-formats">Supported formats</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#hspy-hyperspy-s-hdf5-specification">HSpy - HyperSpy’s HDF5 Specification</a></li>
<li class="toctree-l4"><a class="reference internal" href="#netcdf">NetCDF</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mrc">MRC</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mrcz">MRCZ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#emsa-msa">EMSA/MSA</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ripple">Ripple</a></li>
<li class="toctree-l4"><a class="reference internal" href="#images">Images</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tiff">TIFF</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gatan-digital-micrograph">Gatan Digital Micrograph</a></li>
<li class="toctree-l4"><a class="reference internal" href="#edax-team-spd-and-spc">EDAX TEAM SPD and SPC</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fei-tia-ser-and-emi">FEI TIA ser and emi</a></li>
<li class="toctree-l4"><a class="reference internal" href="#semper-unf-binary-format">SEMPER unf binary format</a></li>
<li class="toctree-l4"><a class="reference internal" href="#blockfile">Blockfile</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dens-heater-log">DENS heater log</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bruker-s-formats">Bruker’s formats</a></li>
<li class="toctree-l4"><a class="reference internal" href="#emd">EMD</a></li>
<li class="toctree-l4"><a class="reference internal" href="#protochips-log">Protochips log</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#reading-data-generated-by-hyperspy-using-other-software-packages">Reading data generated by HyperSpy using other software packages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#importrpl-digital-micrograph-plugin">ImportRPL Digital Micrograph plugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="#readhyperspyh5-matlab-plugin">readHyperSpyH5 MATLAB Plugin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="events.html">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="big_data.html">Working with big data</a></li>
<li class="toctree-l2"><a class="reference internal" href="metadata_structure.html">Metadata structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/modules.html">Full HyperSpy API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../citing.html">Citing HyperSpy</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">HyperSpy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">HyperSpy User Guide</a> &raquo;</li>
        
      <li>Loading and saving data</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/user_guide/io.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="loading-and-saving-data">
<span id="io"></span><h1><a class="toc-backref" href="#id14">Loading and saving data</a><a class="headerlink" href="#loading-and-saving-data" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#loading-and-saving-data" id="id14">Loading and saving data</a></p>
<ul>
<li><p><a class="reference internal" href="#loading-files-the-load-function" id="id15">Loading files: the load function</a></p>
<ul>
<li><p><a class="reference internal" href="#loading-multiple-files" id="id16">Loading multiple files</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#saving-data-to-files" id="id17">Saving data to files</a></p></li>
<li><p><a class="reference internal" href="#supported-formats" id="id18">Supported formats</a></p>
<ul>
<li><p><a class="reference internal" href="#hspy-hyperspy-s-hdf5-specification" id="id19">HSpy - HyperSpy’s HDF5 Specification</a></p>
<ul>
<li><p><a class="reference internal" href="#extra-saving-arguments" id="id20">Extra saving arguments</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#netcdf" id="id21">NetCDF</a></p></li>
<li><p><a class="reference internal" href="#mrc" id="id22">MRC</a></p></li>
<li><p><a class="reference internal" href="#mrcz" id="id23">MRCZ</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id24">Extra saving arguments</a></p></li>
<li><p><a class="reference internal" href="#example-usage" id="id25">Example Usage</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#emsa-msa" id="id26">EMSA/MSA</a></p>
<ul>
<li><p><a class="reference internal" href="#id3" id="id27">Extra saving arguments</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#ripple" id="id28">Ripple</a></p></li>
<li><p><a class="reference internal" href="#images" id="id29">Images</a></p></li>
<li><p><a class="reference internal" href="#tiff" id="id30">TIFF</a></p></li>
<li><p><a class="reference internal" href="#gatan-digital-micrograph" id="id31">Gatan Digital Micrograph</a></p>
<ul>
<li><p><a class="reference internal" href="#extra-loading-arguments" id="id32">Extra loading arguments</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#edax-team-spd-and-spc" id="id33">EDAX TEAM SPD and SPC</a></p>
<ul>
<li><p><a class="reference internal" href="#extra-loading-arguments-for-spd-file" id="id34">Extra loading arguments for <code class="docutils literal notranslate"><span class="pre">.spd</span></code> file</a></p></li>
<li><p><a class="reference internal" href="#extra-loading-arguments-for-spd-and-spc-files" id="id35">Extra loading arguments for <code class="docutils literal notranslate"><span class="pre">.spd</span></code> and <code class="docutils literal notranslate"><span class="pre">.spc</span></code> files</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#fei-tia-ser-and-emi" id="id36">FEI TIA ser and emi</a></p></li>
<li><p><a class="reference internal" href="#semper-unf-binary-format" id="id37">SEMPER unf binary format</a></p></li>
<li><p><a class="reference internal" href="#blockfile" id="id38">Blockfile</a></p></li>
<li><p><a class="reference internal" href="#dens-heater-log" id="id39">DENS heater log</a></p></li>
<li><p><a class="reference internal" href="#bruker-s-formats" id="id40">Bruker’s formats</a></p>
<ul>
<li><p><a class="reference internal" href="#bruker-composite-file" id="id41">Bruker composite file</a></p>
<ul>
<li><p><a class="reference internal" href="#id10" id="id42">Extra loading arguments</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#spx-format" id="id43">SPX format</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#emd" id="id44">EMD</a></p>
<ul>
<li><p><a class="reference internal" href="#emd-ncem" id="id45">EMD (NCEM)</a></p></li>
<li><p><a class="reference internal" href="#emd-velox" id="id46">EMD (Velox)</a></p>
<ul>
<li><p><a class="reference internal" href="#extra-loading-arguments-fei-emd" id="id47">Extra loading arguments</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#protochips-log" id="id48">Protochips log</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#reading-data-generated-by-hyperspy-using-other-software-packages" id="id49">Reading data generated by HyperSpy using other software packages</a></p>
<ul>
<li><p><a class="reference internal" href="#importrpl-digital-micrograph-plugin" id="id50">ImportRPL Digital Micrograph plugin</a></p></li>
<li><p><a class="reference internal" href="#readhyperspyh5-matlab-plugin" id="id51">readHyperSpyH5 MATLAB Plugin</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="loading-files-the-load-function">
<span id="loading-files"></span><h2><a class="toc-backref" href="#id15">Loading files: the load function</a><a class="headerlink" href="#loading-files-the-load-function" title="Permalink to this headline">¶</a></h2>
<p>HyperSpy can read and write to multiple formats (see <a class="reference internal" href="#supported-formats"><span class="std std-ref">Supported formats</span></a>).
To load data use the <a class="reference internal" href="../api/hyperspy.io.html#hyperspy.io.load" title="hyperspy.io.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">load()</span></code></a> command. For example, to load the
image ascent.jpg you can type:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;ascent.jpg&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If the loading was successful, the variable <code class="docutils literal notranslate"><span class="pre">s</span></code> contains a generic
<a class="reference internal" href="../api/hyperspy.signal.html#hyperspy.signal.BaseSignal" title="hyperspy.signal.BaseSignal"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseSignal</span></code></a>, a <a class="reference internal" href="../api/hyperspy._signals.signal1d.html#hyperspy._signals.signal1d.Signal1D" title="hyperspy._signals.signal1d.Signal1D"><code class="xref py py-class docutils literal notranslate"><span class="pre">Signal1D</span></code></a> or
an <a class="reference internal" href="../api/hyperspy._signals.signal2d.html#hyperspy._signals.signal2d.Signal2D" title="hyperspy._signals.signal2d.Signal2D"><code class="xref py py-class docutils literal notranslate"><span class="pre">Signal2D</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note for python programmers: the data is stored in a numpy array
in the <code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code> attribute, but you will not
normally need to access it there.)</p>
</div>
<p>HyperSpy will try to guess the most likely data type for the corresponding
file. However, you can force it to read the data as a particular data type by
providing the <code class="docutils literal notranslate"><span class="pre">signal</span></code> keyword, which has to be one of: <code class="docutils literal notranslate"><span class="pre">spectrum</span></code>,
<code class="docutils literal notranslate"><span class="pre">image</span></code> or <code class="docutils literal notranslate"><span class="pre">EELS</span></code>, e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;filename&quot;</span><span class="p">,</span> <span class="n">signal</span> <span class="o">=</span> <span class="s2">&quot;EELS&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Some file formats store some extra information about the data, which can be
stored in “attributes”. If HyperSpy manages to read some extra information
about the data it stores it in the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">original_metadata</span></code> attribute. Also, it is
possible that other information will be mapped by HyperSpy to a standard
location where it can be used by some standard routines, the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">metadata</span></code> attribute.</p>
<p>To print the content of the parameters simply:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">metadata</span>
</pre></div>
</div>
<p>The <code class="xref py py-attr docutils literal notranslate"><span class="pre">original_metadata</span></code> and
<code class="xref py py-attr docutils literal notranslate"><span class="pre">metadata</span></code> can be exported to  text files
using the <a class="reference internal" href="../api/hyperspy.misc.utils.html#hyperspy.misc.utils.DictionaryTreeBrowser.export" title="hyperspy.misc.utils.DictionaryTreeBrowser.export"><code class="xref py py-meth docutils literal notranslate"><span class="pre">export()</span></code></a> method, e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">original_metadata</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="s1">&#39;parameters&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="deprecated" id="load-to-memory-label">
<p><span class="versionmodified deprecated">Deprecated since version 1.2: </span><code class="docutils literal notranslate"><span class="pre">memmap_dir</span></code> and <code class="docutils literal notranslate"><span class="pre">load_to_memory</span></code> <a class="reference internal" href="../api/hyperspy.io.html#hyperspy.io.load" title="hyperspy.io.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">load()</span></code></a> keyword
arguments. Use <code class="docutils literal notranslate"><span class="pre">lazy</span></code> instead of <code class="docutils literal notranslate"><span class="pre">load_to_memory</span></code>. <code class="docutils literal notranslate"><span class="pre">lazy</span></code> makes
<code class="docutils literal notranslate"><span class="pre">memmap_dir</span></code> unnecessary.</p>
</div>
<p>Almost all file readers support accessing the data without reading it to memory
(see <a class="reference internal" href="#supported-formats"><span class="std std-ref">Supported formats</span></a> for a list). This feature can be useful when
analysing large files. To load a file without loading it to memory simply set
<code class="docutils literal notranslate"><span class="pre">lazy</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> e.g.:</p>
<p>The units of the navigation and signal axes can be converted automatically
during loading using the <code class="docutils literal notranslate"><span class="pre">convert_units</span></code> parameter. If <cite>True</cite>, the
<code class="docutils literal notranslate"><span class="pre">convert_to_units</span></code> method of the <code class="docutils literal notranslate"><span class="pre">axes_manager</span></code> will be used for the conversion
and if set to <cite>False</cite>, the units will not be converted. The default is <cite>False</cite>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;filename.hspy&quot;</span><span class="p">,</span> <span class="n">lazy</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>More details on lazy evaluation support in <a class="reference internal" href="big_data.html#big-data-label"><span class="std std-ref">Working with big data</span></a>.</p>
<div class="section" id="loading-multiple-files">
<h3><a class="toc-backref" href="#id16">Loading multiple files</a><a class="headerlink" href="#loading-multiple-files" title="Permalink to this headline">¶</a></h3>
<p>Rather than loading files individually, several files can be loaded with a
single command. This can be done by passing a list of filenames to the load
functions, e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">load</span><span class="p">([</span><span class="s2">&quot;file1.hspy&quot;</span><span class="p">,</span> <span class="s2">&quot;file2.hspy&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>or by using <a class="reference external" href="http://docs.python.org/library/glob.html">shell-style wildcards</a></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.2.0: </span>stack multi-signal files</p>
</div>
<p>By default HyperSpy will return a list of all the files loaded. Alternatively,
HyperSpy can stack the data of the files contain data with exactly the same
dimensions. If this is not the case an error is raised. If each file contains
multiple (N) signals, N stacks will be created. Here, the numbers of signals
per file must also match, or an error will be raised.</p>
<p>It is also possible to load multiple files with a single command without
stacking them by passing the <cite>stack=False</cite> argument to the load function, in
which case the function will return a list of objects, e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ls</span>
<span class="go">CL1.raw  CL1.rpl~  CL2.rpl  CL3.rpl  CL4.rpl  LL3.raw  shift_map-          SI3.npy</span>
<span class="go">CL1.rpl  CL2.raw   CL3.raw  CL4.raw  hdf5/    LL3.rpl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;*.rpl&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span>
<span class="go">[&lt;EELSSpectrum, title: CL1, dimensions: (64, 64, 1024)&gt;,</span>
<span class="go">&lt;EELSSpectrum, title: CL2, dimensions: (64, 64, 1024)&gt;,</span>
<span class="go">&lt;EELSSpectrum, title: CL3, dimensions: (64, 64, 1024)&gt;,</span>
<span class="go">&lt;EELSSpectrum, title: CL4, dimensions: (64, 64, 1024)&gt;,</span>
<span class="go">&lt;EELSSpectrum, title: LL3, dimensions: (64, 64, 1024)&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;*.rpl&#39;</span><span class="p">,</span> <span class="n">stack</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span>
<span class="go">&lt;EELSSpectrum, title: mva, dimensions: (5, 64, 64, 1024)&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="saving-data-to-files">
<span id="saving-files"></span><h2><a class="toc-backref" href="#id17">Saving data to files</a><a class="headerlink" href="#saving-data-to-files" title="Permalink to this headline">¶</a></h2>
<p>To save data to a file use the <a class="reference internal" href="../api/hyperspy.signal.html#hyperspy.signal.BaseSignal.save" title="hyperspy.signal.BaseSignal.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">save()</span></code></a> method. The
first argument is the filename and the format is defined by the filename
extension. If the filename does not contain the extension the default format
(<a class="reference internal" href="#hspy-format"><span class="std std-ref">HSpy - HyperSpy’s HDF5 Specification</span></a>) is used. For example, if the <code class="xref py py-const docutils literal notranslate"><span class="pre">s</span></code> variable
contains the <a class="reference internal" href="../api/hyperspy.signal.html#hyperspy.signal.BaseSignal" title="hyperspy.signal.BaseSignal"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseSignal</span></code></a> that you want to write to a file,
the following will write the data to a file called <code class="file docutils literal notranslate"><span class="pre">spectrum.hspy</span></code> in the
default <a class="reference internal" href="#hspy-format"><span class="std std-ref">HSpy - HyperSpy’s HDF5 Specification</span></a> format:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;spectrum&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If instead you want to save in the <a class="reference internal" href="#ripple-format"><span class="std std-ref">Ripple</span></a> write instead:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;spectrum.rpl&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Some formats take extra arguments. See the relevant subsection of
<a class="reference internal" href="#supported-formats"><span class="std std-ref">Supported formats</span></a> for more information.</p>
</div>
<div class="section" id="supported-formats">
<span id="id1"></span><h2><a class="toc-backref" href="#id18">Supported formats</a><a class="headerlink" href="#supported-formats" title="Permalink to this headline">¶</a></h2>
<p>Here is a summary of the different formats that are currently supported by
HyperSpy. The “lazy” column specifies if lazy evaluation is supported.</p>
<table class="docutils align-default" id="id13">
<caption><span class="caption-text">Supported file formats</span><a class="headerlink" href="#id13" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 45%" />
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 18%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Format</p></th>
<th class="head"><p>Read</p></th>
<th class="head"><p>Write</p></th>
<th class="head"><p>lazy</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Gatan’s dm3</p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>Gatan’s dm4</p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>FEI’s emi and ser</p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>HDF5</p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>Image: jpg</p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>TIFF</p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>MRC</p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>MRCZ</p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>EMSA/MSA</p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p>NetCDF</p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p>Ripple</p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>SEMPER unf</p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>Blockfile</p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>DENS heater log</p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p>Bruker’s bcf</p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>Bruker’s spx</p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p>EMD (NCEM)</p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>EMD (Velox)</p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>Protochips log</p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p>EDAX .spc and .spd</p></td>
<td><p>Yes</p></td>
<td><p>No</p></td>
<td><p>Yes</p></td>
</tr>
</tbody>
</table>
<div class="section" id="hspy-hyperspy-s-hdf5-specification">
<span id="hspy-format"></span><h3><a class="toc-backref" href="#id19">HSpy - HyperSpy’s HDF5 Specification</a><a class="headerlink" href="#hspy-hyperspy-s-hdf5-specification" title="Permalink to this headline">¶</a></h3>
<p>This is the default format and it is the only one that guarantees that no
information will be lost in the writing process and that supports saving data
of arbitrary dimensions. It is based on the <a class="reference external" href="http://www.hdfgroup.org/HDF5/">HDF5 open standard</a>. The HDF5 file format is supported by <a class="reference external" href="http://www.hdfgroup.org/products/hdf5_tools/SWSummarybyName.htm">many
applications</a>.
Part of the specification is documented in <a class="reference internal" href="metadata_structure.html#metadata-structure"><span class="std std-ref">Metadata structure</span></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.2: </span>Enable saving HSpy files with the <code class="docutils literal notranslate"><span class="pre">.hspy</span></code> extension. Preveously only the
<code class="docutils literal notranslate"><span class="pre">.hdf5</span></code> extension was recognised.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.3: </span>The default extension for the HyperSpy HDF5 specification is now <code class="docutils literal notranslate"><span class="pre">.hspy</span></code>.
The option to change the default is no longer present in <code class="docutils literal notranslate"><span class="pre">preferences</span></code>.</p>
</div>
<p>Only loading of HDF5 files following the HyperSpy specification are supported.
Usually their extension is <code class="docutils literal notranslate"><span class="pre">.hspy</span></code> extension, but older versions of HyperSpy
would save them with the <code class="docutils literal notranslate"><span class="pre">.hdf5</span></code> extension. Both extensions are recognised
by HyperSpy since version 1.2. However, HyperSpy versions older than 1.2
won’t recognise the <code class="docutils literal notranslate"><span class="pre">.hspy</span></code> extension. To
workaround the issue when using old HyperSpy installations simply change the
extension manually to <code class="docutils literal notranslate"><span class="pre">.hdf5</span></code> or
save directly the file using this extension by explicitly adding it to the
filename e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">BaseSignal</span><span class="p">([</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;test.hdf5&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>When saving to <code class="docutils literal notranslate"><span class="pre">hspy</span></code>, all supported objects in the signal’s
<a class="reference internal" href="../api/hyperspy.io_plugins.semper_unf.html#hyperspy.io_plugins.semper_unf.SemperFormat.metadata" title="hyperspy.io_plugins.semper_unf.SemperFormat.metadata"><code class="xref py py-attr docutils literal notranslate"><span class="pre">metadata</span></code></a> is stored. This includes  lists, tuples and signals.
Please note that in order to increase saving efficiency and speed, if possible,
the inner-most structures are converted to numpy arrays when saved. This
procedure homogenizes any types of the objects inside, most notably casting
numbers as strings if any other strings are present:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># before saving:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">somelist</span>
<span class="go">[1, 2.0, &#39;a name&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># after saving:</span>
<span class="go">[&#39;1&#39;, &#39;2.0&#39;, &#39;a name&#39;]</span>
</pre></div>
</div>
<p>The change of type is done using numpy “safe” rules, so no information is lost,
as numbers are represented to full machine precision.</p>
<p>This feature is particularly useful when using
<code class="xref py py-meth docutils literal notranslate"><span class="pre">get_lines_intensity()</span></code> (see <a class="reference internal" href="eds.html#get-lines-intensity"><span class="std std-ref">get lines
intensity</span></a>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">example_signals</span><span class="o">.</span><span class="n">EDS_SEM_Spectrum</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">Sample</span><span class="o">.</span><span class="n">intensities</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">get_lines_intensity</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;EDS_spectrum.hspy&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s_new</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;EDS_spectrum.hspy&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s_new</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">Sample</span><span class="o">.</span><span class="n">intensities</span>
<span class="go">[&lt;BaseSignal, title: X-ray line intensity of EDS SEM Signal1D: Al_Ka at 1.49 keV, dimensions: (|)&gt;,</span>
<span class="go"> &lt;BaseSignal, title: X-ray line intensity of EDS SEM Signal1D: C_Ka at 0.28 keV, dimensions: (|)&gt;,</span>
<span class="go"> &lt;BaseSignal, title: X-ray line intensity of EDS SEM Signal1D: Cu_La at 0.93 keV, dimensions: (|)&gt;,</span>
<span class="go"> &lt;BaseSignal, title: X-ray line intensity of EDS SEM Signal1D: Mn_La at 0.63 keV, dimensions: (|)&gt;,</span>
<span class="go"> &lt;BaseSignal, title: X-ray line intensity of EDS SEM Signal1D: Zr_La at 2.04 keV, dimensions: (|)&gt;]</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.1: </span><code class="docutils literal notranslate"><span class="pre">chunks</span></code> keyword argument</p>
</div>
<p>By default, the data is saved in chunks that are optimised to contain at least one full signal. It is
possible to customise the chunk shape using the <code class="docutils literal notranslate"><span class="pre">chunks</span></code> keyword. For example, to save the data with
<code class="docutils literal notranslate"><span class="pre">(20,</span> <span class="pre">20,</span> <span class="pre">256)</span></code> chunks instead of the default <code class="docutils literal notranslate"><span class="pre">(7,</span> <span class="pre">7,</span> <span class="pre">2048)</span></code> chunks for this signal:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">Signal1D</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">2048</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;test_chunks&quot;</span><span class="p">,</span> <span class="n">chunks</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">256</span><span class="p">),</span> <span class="n">overwrite</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that currently it is not possible to pass different customised chunk shapes to all signals and
arrays contained in a signal and its metadata. Therefore, the value of <code class="docutils literal notranslate"><span class="pre">chunks</span></code> provided on saving
will be applied to all arrays contained in the signal.</p>
<p>By passing <code class="docutils literal notranslate"><span class="pre">True</span></code> to <code class="docutils literal notranslate"><span class="pre">chunks</span></code> the chunk shape is guessed using <code class="docutils literal notranslate"><span class="pre">h5py</span></code>’s <code class="docutils literal notranslate"><span class="pre">guess_chunks</span></code> function
what, for large signal spaces usually leads to smaller chunks as <code class="docutils literal notranslate"><span class="pre">guess_chunks</span></code> does not impose the
constrain of storing at least one signal per chunks. For example, for the signal in the example above
passing <code class="docutils literal notranslate"><span class="pre">chunks=True</span></code> results in <code class="docutils literal notranslate"><span class="pre">(7,</span> <span class="pre">7,</span> <span class="pre">256)</span></code> chunks.</p>
<div class="section" id="extra-saving-arguments">
<h4><a class="toc-backref" href="#id20">Extra saving arguments</a><a class="headerlink" href="#extra-saving-arguments" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><cite>compression</cite> : One of None, ‘gzip’, ‘szip’, ‘lzf’ (default is ‘gzip’).</p></li>
</ul>
</div>
</div>
<div class="section" id="netcdf">
<span id="netcdf-format"></span><h3><a class="toc-backref" href="#id21">NetCDF</a><a class="headerlink" href="#netcdf" title="Permalink to this headline">¶</a></h3>
<p>This was the default format in HyperSpy’s predecessor, EELSLab, but it has been
superseded by <span class="xref std std-ref">HDF5</span> in HyperSpy. We provide only reading capabilities
but we do not support writing to this format.</p>
<p>Note that only NetCDF files written by EELSLab are supported.</p>
<p>To use this format a python netcdf interface must be installed manually because
it is not installed by default when using the automatic installers.</p>
</div>
<div class="section" id="mrc">
<span id="mrc-format"></span><h3><a class="toc-backref" href="#id22">MRC</a><a class="headerlink" href="#mrc" title="Permalink to this headline">¶</a></h3>
<p>This is a format widely used for tomographic data. Our implementation is based
on <a class="reference external" href="https://www2.mrc-lmb.cam.ac.uk/research/locally-developed-software/image-processing-software/">this specification</a>. We also
partly support FEI’s custom header. We do not provide writing features for this
format, but, as it is an open format, we may implement this feature in the
future on demand.</p>
<p>For mrc files <code class="docutils literal notranslate"><span class="pre">load</span></code> takes the <code class="docutils literal notranslate"><span class="pre">mmap_mode</span></code> keyword argument enabling
loading the file using a different mode (default is copy-on-write) . However,
note that lazy loading does not support in-place writing (i.e lazy loading and
the “r+” mode are incompatible).</p>
</div>
<div class="section" id="mrcz">
<span id="mrcz-format"></span><h3><a class="toc-backref" href="#id23">MRCZ</a><a class="headerlink" href="#mrcz" title="Permalink to this headline">¶</a></h3>
<p>MRCZ is an extension of the CCP-EM MRC2014 file format. <a class="reference external" href="http://www.ccpem.ac.uk/mrc_format/mrc2014.php">CCP-EM MRC2014</a> file format.  It uses the
<cite>blosc</cite> meta-compression library to bitshuffle and compress files in a blocked,
multi-threaded environment. The supported data types are:</p>
<p>[<cite>float32</cite>,`int8`,`uint16`,`int16`,`complex64`]</p>
<p>It supports arbitrary meta-data, which is serialized into JSON.</p>
<p>MRCZ also supports asychronous reads and writes.</p>
<p>Repository: <a class="reference external" href="https://github.com/em-MRCZ">https://github.com/em-MRCZ</a>
PyPI:       <a class="reference external" href="https://pypi.python.org/pypi/mrcz">https://pypi.python.org/pypi/mrcz</a>
Citation:   Submitted.
Preprint:   <a class="reference external" href="http://www.biorxiv.org/content/early/2017/03/13/116533">http://www.biorxiv.org/content/early/2017/03/13/116533</a></p>
<p>Support for this format is not enabled by default. In order to enable it
install the <cite>mrcz</cite> and optionally the <cite>blosc</cite> Python packages.</p>
<div class="section" id="id2">
<h4><a class="toc-backref" href="#id24">Extra saving arguments</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<dl class="simple">
<dt><cite>do_async</cite>:</dt><dd><p>currently supported within Hyperspy for writing only, this will save
the file in a background thread and return immediately. Defaults
to <cite>False</cite>.</p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>There is no method currently implemented within Hyperspy to tell if an
asychronous write has finished.</p>
</div>
<dl class="simple">
<dt><cite>compressor</cite>:</dt><dd><p>The compression codec, one of [<cite>None</cite>,`’zlib`’,`’zstd’<cite>, `’lz4’</cite>]. Defaults to <cite>None</cite>.</p>
</dd>
<dt><cite>clevel</cite>:</dt><dd><p>The compression level, an <cite>int</cite> from 1 to 9. Defaults to 1.</p>
</dd>
<dt><cite>n_threads</cite>:</dt><dd><p>The number of threads to use for <cite>blosc</cite> compression. Defaults to
the maximum number of virtual cores (including Intel Hyperthreading)
on your system, which is recommended for best performance. If <cite>do_asyc = True</cite> you may wish to leave one thread free for the
Python GIL.</p>
</dd>
</dl>
<p>The recommended compression codec is ‘zstd’ (zStandard) with <cite>clevel=1</cite> for
general use. If speed is critical, use ‘lz4’ (LZ4) with <cite>clevel=9</cite>. Integer data
compresses more redably than floating-point data, and in general the histogram
of values in the data reflects how compressible it is.</p>
<p>To save files that are compatible with other programs that can use MRC such as
GMS, IMOD, Relion, MotionCorr, etc. save with <cite>compressor=None</cite>, extension <cite>.mrc</cite>.
JSON metadata will not be recognized by other MRC-supporting software but should
not cause crashes.</p>
</div>
<div class="section" id="example-usage">
<h4><a class="toc-backref" href="#id25">Example Usage</a><a class="headerlink" href="#example-usage" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;file.mrcz&#39;</span><span class="p">,</span> <span class="n">do_async</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">compressor</span><span class="o">=</span><span class="s1">&#39;zstd&#39;</span><span class="p">,</span> <span class="n">clevel</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">new_signal</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;file.mrcz&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="emsa-msa">
<span id="msa-format"></span><h3><a class="toc-backref" href="#id26">EMSA/MSA</a><a class="headerlink" href="#emsa-msa" title="Permalink to this headline">¶</a></h3>
<p>This <a class="reference external" href="http://www.amc.anl.gov/ANLSoftwareLibrary/02-MMSLib/XEDS/EMMFF/EMMFF.IBM/Emmff.Total">open standard format</a>
is widely used to exchange single spectrum data, but it does not support
multidimensional data. It can be used to exchange single spectra with Gatan’s
Digital Micrograph.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If several spectra are loaded and stacked (<code class="docutils literal notranslate"><span class="pre">hs.load('pattern',</span> <span class="pre">stack_signals=True</span></code>)
the calibration read from the first spectrum and applied to all other spectra.</p>
</div>
<div class="section" id="id3">
<h4><a class="toc-backref" href="#id27">Extra saving arguments</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>For the MSA format the <code class="docutils literal notranslate"><span class="pre">format</span></code> argument is used to specify whether the
energy axis should also be saved with the data.  The default, ‘Y’ omits the
energy axis in the file.  The alternative, ‘XY’, saves a second column with the
calibrated energy data. It  is possible to personalise the separator with the
<cite>separator</cite> keyword.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>However, if a different separator is chosen the resulting file will not
comply with the MSA/EMSA standard and HyperSpy and other software may not
be able to read it.</p>
</div>
<p>The default encoding is <cite>latin-1</cite>. It is possible to set a different encoding
using the <cite>encoding</cite> argument, e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;file.msa&#39;</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf8&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ripple">
<span id="ripple-format"></span><h3><a class="toc-backref" href="#id28">Ripple</a><a class="headerlink" href="#ripple" title="Permalink to this headline">¶</a></h3>
<p>This <a class="reference external" href="http://www.nist.gov/lispix/doc/image-file-formats/raw-file-format.htm">open standard format</a> is
widely used to exchange multidimensional data. However, it only supports data of
up to three dimensions. It can be used to exchange data with Bruker and <a class="reference external" href="http://www.nist.gov/lispix/">Lispix</a>. Used in combination with the <a class="reference internal" href="#import-rpl"><span class="std std-ref">ImportRPL Digital Micrograph plugin</span></a>
it is very useful for exporting data to Gatan’s Digital Micrograph.</p>
<p>The default encoding is latin-1. It is possible to set a different encoding
using the encoding argument, e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;file.rpl&#39;</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf8&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>For mrc files <code class="docutils literal notranslate"><span class="pre">load</span></code> takes the <code class="docutils literal notranslate"><span class="pre">mmap_mode</span></code> keyword argument enabling
loading the file using a different mode (default is copy-on-write) . However,
note that lazy loading does not support in-place writing (i.e lazy loading and
the “r+” mode are incompatible).</p>
</div>
<div class="section" id="images">
<span id="image-format"></span><h3><a class="toc-backref" href="#id29">Images</a><a class="headerlink" href="#images" title="Permalink to this headline">¶</a></h3>
<p>HyperSpy is able to read and write data too all the image formats supported by
<a class="reference external" href="http://www.pythonware.com/products/pil/">the Python Image Library</a> (PIL).
This includes png, pdf, gif etc.</p>
<p>It is important to note that these image formats only support 8-bit files, and
therefore have an insufficient dynamic range for most scientific applications.
It is therefore highly discouraged to use any general image format (with the
exception of <a class="reference internal" href="#tiff-format"><span class="std std-ref">TIFF</span></a> which uses another library) to store data for
analysis purposes.</p>
</div>
<div class="section" id="tiff">
<span id="tiff-format"></span><h3><a class="toc-backref" href="#id30">TIFF</a><a class="headerlink" href="#tiff" title="Permalink to this headline">¶</a></h3>
<p>HyperSpy can read and write 2D and 3D TIFF files using using
Christoph Gohlke’s tifffile library. In particular it supports reading and
writing of TIFF, BigTIFF, OME-TIFF, STK, LSM, NIH, and FluoView files. Most of
these are uncompressed or losslessly compressed 2**(0 to 6) bit integer,16, 32
and 64-bit float, grayscale and RGB(A) images, which are commonly used in
bio-scientific imaging. See <a class="reference external" href="http://www.lfd.uci.edu/~gohlke/code/tifffile.py.html">the library webpage</a> for more details.</p>
<p>Currently HyperSpy has limited support for reading and saving the TIFF tags.
However, the way that HyperSpy reads and saves the scale and the units of tiff
files is compatible with ImageJ/Fiji and Gatan Digital Micrograph software.
HyperSpy can also import the scale and the units from tiff files saved using
FEI and Zeiss SEM software.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Force read image resolution using the x_resolution, y_resolution and</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># the resolution_unit of the tiff tags. Be aware, that most of the</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># software doesn&#39;t (properly) use these tags when saving tiff files.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;file.tif&#39;</span><span class="p">,</span> <span class="n">force_read_resolution</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>HyperSpy can also read and save custom tags through Christoph Gohlke’s tifffile
library. See <a class="reference external" href="http://www.lfd.uci.edu/~gohlke/code/tifffile.py.html">the library webpage</a> for more details.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Saving the string &#39;Random metadata&#39; in a custom tag (ID 65000)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">extratag</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">65000</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;Random metadata&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;file.tif&#39;</span><span class="p">,</span> <span class="n">extratags</span><span class="o">=</span><span class="n">extratag</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Saving the string &#39;Random metadata&#39; from a custom tag (ID 65000)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s2</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;file.tif&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s2</span><span class="o">.</span><span class="n">original_metadata</span><span class="p">[</span><span class="s1">&#39;Number_65000&#39;</span><span class="p">]</span>
<span class="go">b&#39;Random metadata&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="gatan-digital-micrograph">
<span id="dm3-format"></span><h3><a class="toc-backref" href="#id31">Gatan Digital Micrograph</a><a class="headerlink" href="#gatan-digital-micrograph" title="Permalink to this headline">¶</a></h3>
<p>HyperSpy can read both dm3 and dm4 files but the reading features are not
complete (and probably they will be unless Gatan releases the specifications of
the format). That said, we understand that this is an important feature and if
loading a particular Digital Micrograph file fails for you, please report it as
an issue in the <a class="reference external" href="github.com/hyperspy/hyperspy/issues">issues tracker</a> to make
us aware of the problem.</p>
<div class="section" id="extra-loading-arguments">
<h4><a class="toc-backref" href="#id32">Extra loading arguments</a><a class="headerlink" href="#extra-loading-arguments" title="Permalink to this headline">¶</a></h4>
<p>optimize: bool, default is True. During loading, the data is replaced by its
<a class="reference internal" href="tools.html#signal-transpose-optimize"><span class="std std-ref">optimized copy</span></a> to speed up operations,
e. g. iteration over navigation axes. The cost of this speed improvement is to
double the memory requirement during data loading.</p>
</div>
</div>
<div class="section" id="edax-team-spd-and-spc">
<span id="edax-format"></span><h3><a class="toc-backref" href="#id33">EDAX TEAM SPD and SPC</a><a class="headerlink" href="#edax-team-spd-and-spc" title="Permalink to this headline">¶</a></h3>
<p>HyperSpy can read both <code class="docutils literal notranslate"><span class="pre">.spd</span></code> (spectrum image) and <code class="docutils literal notranslate"><span class="pre">.spc</span></code> (single spectra)
files from the EDAX TEAM software.
If reading an <code class="docutils literal notranslate"><span class="pre">.spd</span></code> file, the calibration of the
spectrum image is loaded from the corresponding <code class="docutils literal notranslate"><span class="pre">.ipr</span></code> and <code class="docutils literal notranslate"><span class="pre">.spc</span></code> files
stored in the same directory, or from specific files indicated by the user.
If these calibration files are not available, the data from the <code class="docutils literal notranslate"><span class="pre">.spd</span></code>
file will still be loaded, but with no spatial or energy calibration.
If elemental information has been defined in the spectrum image, those
elements will automatically be added to the signal loaded by HyperSpy.</p>
<p>Currently, loading an EDAX TEAM spectrum or spectrum image will load an
<code class="docutils literal notranslate"><span class="pre">EDSSEMSpectrum</span></code> Signal. If support for TEM EDS data is needed, please
open an issue in the <a class="reference external" href="github.com/hyperspy/hyperspy/issues">issues tracker</a> to
alert the developers of the need.</p>
<p>For further reference, file specifications for the formats are
available publicly available from EDAX and are on Github
(<a class="reference external" href="https://github.com/hyperspy/hyperspy/files/29506/SPECTRUM-V70.pdf">.spc</a>,
<a class="reference external" href="https://github.com/hyperspy/hyperspy/files/29505/SpcMap-spd.file.format.pdf">.spd</a>, and
<a class="reference external" href="https://github.com/hyperspy/hyperspy/files/29507/ImageIPR.pdf">.ipr</a>).</p>
<div class="section" id="extra-loading-arguments-for-spd-file">
<h4><a class="toc-backref" href="#id34">Extra loading arguments for <code class="docutils literal notranslate"><span class="pre">.spd</span></code> file</a><a class="headerlink" href="#extra-loading-arguments-for-spd-file" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><cite>spc_fname</cite> : {None, str}, name of file from which to read the spectral calibration. If data was exported fully from EDAX TEAM software, an .spc file with the same name as the .spd should be present. If <cite>None</cite>, the default filename will be searched for. Otherwise, the name of the <code class="docutils literal notranslate"><span class="pre">.spc</span></code> file to use for calibration can be explicitly given as a string.</p></li>
<li><p><cite>ipr_fname</cite> : {None, str}, name of file from which to read the spatial calibration. If data was exported fully from EDAX TEAM software, an <code class="docutils literal notranslate"><span class="pre">.ipr</span></code> file with the same name as the <code class="docutils literal notranslate"><span class="pre">.spd</span></code> (plus a “_Img” suffix) should be present.  If <cite>None</cite>, the default filename will be searched for. Otherwise, the name of the <code class="docutils literal notranslate"><span class="pre">.ipr</span></code> file to use for spatial calibration can be explicitly given as a string.</p></li>
<li><p><a href="#id7"><span class="problematic" id="id8">**</span></a>kwargs: remaining arguments are passed to the Numpy <code class="docutils literal notranslate"><span class="pre">memmap</span></code> function.</p></li>
</ul>
</div>
<div class="section" id="extra-loading-arguments-for-spd-and-spc-files">
<h4><a class="toc-backref" href="#id35">Extra loading arguments for <code class="docutils literal notranslate"><span class="pre">.spd</span></code> and <code class="docutils literal notranslate"><span class="pre">.spc</span></code> files</a><a class="headerlink" href="#extra-loading-arguments-for-spd-and-spc-files" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><cite>load_all_spc</cite> : bool, switch to control if all of the <code class="docutils literal notranslate"><span class="pre">.spc</span></code> header is read, or just the important parts for import into HyperSpy.</p></li>
</ul>
</div>
</div>
<div class="section" id="fei-tia-ser-and-emi">
<span id="fei-format"></span><h3><a class="toc-backref" href="#id36">FEI TIA ser and emi</a><a class="headerlink" href="#fei-tia-ser-and-emi" title="Permalink to this headline">¶</a></h3>
<p>HyperSpy can read <code class="docutils literal notranslate"><span class="pre">ser</span></code> and <code class="docutils literal notranslate"><span class="pre">emi</span></code> files but the reading features are not
complete (and probably they will be unless FEI releases the specifications of
the format). That said we know that this is an important feature and if loading
a particular ser or emi file fails for you, please report it as an issue in the
<a class="reference external" href="github.com/hyperspy/hyperspy/issues">issues tracker</a> to make us aware of the
problem.</p>
<p>HyperSpy (unlike TIA) can read data directly from the <code class="docutils literal notranslate"><span class="pre">.ser</span></code> files. However,
by doing so, the information that is stored in the emi file is lost.
Therefore strongly recommend to load using the <code class="docutils literal notranslate"><span class="pre">.emi</span></code> file instead.</p>
<p>When reading an <code class="docutils literal notranslate"><span class="pre">.emi</span></code> file if there are several <code class="docutils literal notranslate"><span class="pre">.ser</span></code> files associated
with it, all of them will be read and returned as a list.</p>
</div>
<div class="section" id="semper-unf-binary-format">
<span id="unf-format"></span><h3><a class="toc-backref" href="#id37">SEMPER unf binary format</a><a class="headerlink" href="#semper-unf-binary-format" title="Permalink to this headline">¶</a></h3>
<p>SEMPER is a fully portable system of programs for image processing, particularly
suitable for applications in electron microscopy developed by Owen Saxton (see
DOI: 10.1016/S0304-3991(79)80044-3 for more information).The unf format is a
binary format with an extensive header for up to 3 dimensional data.
HyperSpy can read and write unf-files and will try to convert the data into a
fitting BaseSignal subclass, based on the information stored in the label.
Currently version 7 of the format should be fully supported.</p>
</div>
<div class="section" id="blockfile">
<span id="blockfile-format"></span><h3><a class="toc-backref" href="#id38">Blockfile</a><a class="headerlink" href="#blockfile" title="Permalink to this headline">¶</a></h3>
<p>HyperSpy can read and write the blockfile format from NanoMegas ASTAR software.
It is used to store a series of diffraction patterns from scanning precession
electron diffraction (SPED) measurements, with a limited set of metadata. The
header of the blockfile contains information about centering and distortions
of the diffraction patterns, but is not applied to the signal during reading.
Blockfiles only support data values of type
<a class="reference external" href="http://docs.scipy.org/doc/numpy/user/basics.types.html">np.uint8</a> (integers
in range 0-255).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>While Blockfiles are supported, it is a proprietary format, and future
versions of the format might therefore not be readable. Complete
interoperability with the official software can neither be guaranteed.</p>
</div>
<p>Blockfiles are by default loaded in a “copy-on-write” manner using
<a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.memmap.html">numpy.memmap</a> .
For blockfiles <code class="docutils literal notranslate"><span class="pre">load</span></code> takes the <code class="docutils literal notranslate"><span class="pre">mmap_mode</span></code> keyword argument enabling
loading the file using a different mode. However, note that lazy loading
does not support in-place writing (i.e lazy loading and the “r+” mode
are incompatible).</p>
</div>
<div class="section" id="dens-heater-log">
<span id="dens-format"></span><h3><a class="toc-backref" href="#id39">DENS heater log</a><a class="headerlink" href="#dens-heater-log" title="Permalink to this headline">¶</a></h3>
<p>HyperSpy can read heater log format for DENS solution’s heating holder. The
format stores all the captured data for each timestamp, together with a small
header in a plain-text format. The reader extracts the measured temperature
along the time axis, as well as the date and calibration constants stored in
the header.</p>
</div>
<div class="section" id="bruker-s-formats">
<h3><a class="toc-backref" href="#id40">Bruker’s formats</a><a class="headerlink" href="#bruker-s-formats" title="Permalink to this headline">¶</a></h3>
<p>Bruker’s Esprit(TM) software and hardware allows to acquire and save the data
in different kind of formats. Hyperspy can read two main basic formats: bcf
and spx.</p>
<div class="section" id="bruker-composite-file">
<span id="bcf-format"></span><h4><a class="toc-backref" href="#id41">Bruker composite file</a><a class="headerlink" href="#bruker-composite-file" title="Permalink to this headline">¶</a></h4>
<p>HyperSpy can read “hypermaps” saved with Bruker’s Esprit v1.x or v2.x in bcf
hybrid (virtual file system/container with xml and binary data, optionally
compressed) format. Most bcf import functionality is implemented. Both
high-resolution 16-bit SEM images and hyperspectral EDX data can be retrieved
simultaneously.</p>
<p>BCF can look as all inclusive format, however it does not save some key EDX
parameters: any of dead/live/real times, FWHM at Mn_Ka line. However, real time
for whole map is calculated from pixelAverage, lineAverage, pixelTime,
lineCounter and map height parameters.</p>
<p>Note that Bruker Esprit uses a similar format for EBSD data, but it is not
currently supported by HyperSpy.</p>
<div class="section" id="id10">
<h5><a class="toc-backref" href="#id42">Extra loading arguments</a><a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><cite>select_type</cite> : one of (None, ‘spectrum’, ‘image’). If specified, only the corresponding type of data, either spectrum or image, is returned. By default (None), all data are loaded.</p></li>
<li><p><cite>index</cite> : one of (None, int, “all”). Allow to select the index of the dataset in the bcf file, which can contains several datasets. Default None value result in loading the first dataset. When set to ‘all’, all available datasets will be loaded and returned as separate signals.</p></li>
<li><p><cite>downsample</cite> : the downsample ratio of hyperspectral array (height and width only), can be integer &gt;=1, where ‘1’ results in no downsampling (default 1). The underlying method of downsampling is unchangeable: sum. Differently than block_reduce from skimage.measure it is memory efficient (does not creates intermediate arrays, works inplace).</p></li>
<li><p><cite>cutoff_at_kV</cite> : if set (can be int or float &gt;= 0) can be used either to crop or enlarge energy (or channels) range at max values (default None).</p></li>
</ul>
<p>Example of loading reduced (downsampled, and with energy range cropped)
“spectrum only” data from bcf (original shape: 80keV EDS range (4096 channels),
100x75 pixels):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hs</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;sample80kv.bcf&quot;</span><span class="p">,</span> <span class="n">select_type</span><span class="o">=</span><span class="s1">&#39;spectrum&#39;</span><span class="p">,</span> <span class="n">downsample</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">cutoff_at_kV</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="go">&lt;EDSSEMSpectrum, title: EDX, dimensions: (50, 38|595)&gt;</span>
</pre></div>
</div>
<p>load the same file without extra arguments:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hs</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;sample80kv.bcf&quot;</span><span class="p">)</span>
<span class="go">[&lt;Signal2D, title: BSE, dimensions: (|100, 75)&gt;,</span>
<span class="go">&lt;Signal2D, title: SE, dimensions: (|100, 75)&gt;,</span>
<span class="go">&lt;EDSSEMSpectrum, title: EDX, dimensions: (100, 75|1095)&gt;]</span>
</pre></div>
</div>
<p>The loaded array energy dimension can by forced to be larger than the data
recorded by setting the ‘cutoff_at_kV’ kwarg to higher value:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hs</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;sample80kv.bcf&quot;</span><span class="p">,</span> <span class="n">cutoff_at_kV</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
<span class="go">[&lt;Signal2D, title: BSE, dimensions: (|100, 75)&gt;,</span>
<span class="go">&lt;Signal2D, title: SE, dimensions: (|100, 75)&gt;,</span>
<span class="go">&lt;EDSSEMSpectrum, title: EDX, dimensions: (100, 75|4096)&gt;]</span>
</pre></div>
</div>
<p>Note that setting downsample to &gt;1 currently locks out using SEM imagery
as navigator in the plotting.</p>
</div>
</div>
<div class="section" id="spx-format">
<span id="id11"></span><h4><a class="toc-backref" href="#id43">SPX format</a><a class="headerlink" href="#spx-format" title="Permalink to this headline">¶</a></h4>
<p>Hyperspy can read Bruker’s spx format (single spectra format based on XML).
The format contains extensive list of details and parameters of EDS analyses
which are mapped in hyperspy to metadata and original_metadata dictionaries.</p>
</div>
</div>
<div class="section" id="emd">
<span id="emd-format"></span><h3><a class="toc-backref" href="#id44">EMD</a><a class="headerlink" href="#emd" title="Permalink to this headline">¶</a></h3>
<p>EMD stands for “Electron Microscopy Dataset.” It is a subset of the open source
HDF5 wrapper format. N-dimensional data arrays of any standard type can be
stored in an HDF5 file, as well as tags and other metadata.</p>
<div class="section" id="emd-ncem">
<h4><a class="toc-backref" href="#id45">EMD (NCEM)</a><a class="headerlink" href="#emd-ncem" title="Permalink to this headline">¶</a></h4>
<p>This EMD format was developed by Colin Ophus at the National Center for
Electron Microscopy (NCEM). See <a class="reference external" href="http://emdatasets.com/">http://emdatasets.com/</a> for more information.</p>
<p>For files containing several datasets, the <cite>dataset_name</cite> argument can be
used to select a specific one:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;adatafile.emd&quot;</span><span class="p">,</span> <span class="n">dataset_name</span><span class="o">=</span><span class="s2">&quot;/experimental/science_data_1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or several by using a list:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;adatafile.emd&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">dataset_name</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>                <span class="s2">&quot;/experimental/science_data_1&quot;</span><span class="p">,</span>
<span class="gp">... </span>                <span class="s2">&quot;/experimental/science_data_1&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>asdf</p>
</div>
<div class="section" id="emd-velox">
<span id="emd-fei-format"></span><h4><a class="toc-backref" href="#id46">EMD (Velox)</a><a class="headerlink" href="#emd-velox" title="Permalink to this headline">¶</a></h4>
<p>This is a non-compliant variant of the standard EMD format developed by
Thermo-Fisher (former FEI). HyperSpy supports importing images, EDS spectrum and EDS
spectrum streams (spectrum images stored in a sparse format). For spectrum
streams, there are several loading options (described below) to control the frames
and detectors to load and if to sum them on loading.  The default is
to import the sum over all frames and over all detectors in order to decrease
the data size in memory.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Pruned Velox EMD files only contain the spectrum image in a proprietary
format that HyperSpy cannot read. Therefore, don’t prune FEI EMD files in
you intend to read them with HyperSpy.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hs</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;sample.emd&quot;</span><span class="p">)</span>
<span class="go">[&lt;Signal2D, title: HAADF, dimensions: (|179, 161)&gt;,</span>
<span class="go">&lt;EDSSEMSpectrum, title: EDS, dimensions: (179, 161|4096)&gt;]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently only lazy uncompression rather than lazy loading is implemented.
This means that it is not currently possible to read EDS SI Veloz EMD files
with size bigger than the available memory.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Loading a spectrum image can be slow if
<a class="reference external" href="http://numba.pydata.org/">numba</a> is not installed.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This format is still not stable and files generated with the most recent
version of Velox may not be supported. If you experience issues loading
a file, please report it  to the HyperSpy developers so that they can
add support for newer versions of the format.</p>
</div>
<div class="section" id="extra-loading-arguments-fei-emd">
<span id="id12"></span><h5><a class="toc-backref" href="#id47">Extra loading arguments</a><a class="headerlink" href="#extra-loading-arguments-fei-emd" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><cite>select_type</cite> : one of {None, ‘image’, ‘single_spectrum’, ‘spectrum_image’} (default is None).</p></li>
<li><p><cite>first_frame</cite> : integer (default is 0).</p></li>
<li><p><cite>last_frame</cite> : integer (default is None)</p></li>
<li><p><cite>sum_frames</cite> : boolean (default is True)</p></li>
<li><p><cite>sum_EDS_detectors</cite> : boolean (default is True)</p></li>
<li><p><cite>rebin_energy</cite> : integer (default is 1)</p></li>
<li><p><cite>SI_dtype</cite> : numpy dtype (default is None)</p></li>
<li><p><cite>load_SI_image_stack</cite> : boolean (default is False)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">select_type</span></code> parameter specifies the type of data to load: if <cite>image</cite> is selected,
only images (including EDS maps) are loaded, if <cite>single_spectrum</cite> is selected, only
single spectra are loaded and if <cite>spectrum_image</cite> is selected, only the spectrum
image will be loaded. The <code class="docutils literal notranslate"><span class="pre">first_frame</span></code> and <code class="docutils literal notranslate"><span class="pre">last_frame</span></code> parameters can be used
to select the frame range of the EDS spectrum image to load. To load each individual
EDS frame, use <code class="docutils literal notranslate"><span class="pre">sum_frames=False</span></code> and the EDS spectrum image will be loaded
with an an extra navigation dimension corresponding to the frame index
(time axis). Use the <code class="docutils literal notranslate"><span class="pre">sum_EDS_detectors=True</span></code> parameter to load the signal of
each individual EDS detector. In such a case, a corresponding number of distinct
EDS signal is returned. The default is <code class="docutils literal notranslate"><span class="pre">sum_EDS_detectors=True</span></code>, which loads the
EDS signal as a sum over the signals from each EDS detectors.  The <code class="docutils literal notranslate"><span class="pre">rebin_energy</span></code>
and <code class="docutils literal notranslate"><span class="pre">SI_dtype</span></code> parameters are particularly useful in combination with
<code class="docutils literal notranslate"><span class="pre">sum_frames=False</span></code> to reduce the data size when one want to read the
individual frames of the spectrum image. If <code class="docutils literal notranslate"><span class="pre">SI_dtype=None</span></code> (default), the dtype
of the data in the emd file is used. The <code class="docutils literal notranslate"><span class="pre">load_SI_image_stack</span></code> parameter allows
loading the stack of STEM images acquired simultaneously as the EDS spectrum image.
This can be useful to monitor any specimen changes during the acquisition or to
correct the spatial drift in the spectrum image by using the STEM images.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hs</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;sample.emd&quot;</span><span class="p">,</span> <span class="n">sum_EDS_detectors</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">[&lt;Signal2D, title: HAADF, dimensions: (|179, 161)&gt;,</span>
<span class="go">&lt;EDSSEMSpectrum, title: EDS - SuperXG21, dimensions: (179, 161|4096)&gt;,</span>
<span class="go">&lt;EDSSEMSpectrum, title: EDS - SuperXG22, dimensions: (179, 161|4096)&gt;,</span>
<span class="go">&lt;EDSSEMSpectrum, title: EDS - SuperXG23, dimensions: (179, 161|4096)&gt;,</span>
<span class="go">&lt;EDSSEMSpectrum, title: EDS - SuperXG24, dimensions: (179, 161|4096)&gt;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">hs</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;sample.emd&quot;</span><span class="p">,</span> <span class="n">sum_frames</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">load_SI_image_stack</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">SI_dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int8</span><span class="p">,</span> <span class="n">rebin_energy</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">[&lt;Signal2D, title: HAADF, dimensions: (50|179, 161)&gt;,</span>
<span class="go">&lt;EDSSEMSpectrum, title: EDS, dimensions: (50, 179, 161|1024)&gt;]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="protochips-log">
<span id="protochips-format"></span><h3><a class="toc-backref" href="#id48">Protochips log</a><a class="headerlink" href="#protochips-log" title="Permalink to this headline">¶</a></h3>
<p>HyperSpy can read heater, biasing and gas cell log files for Protochips holder.
The format stores all the captured data together with a small header in a csv
file. The reader extracts the measured quantity (e. g. temperature, pressure,
current, voltage) along the time axis, as well as the notes saved during the
experiment. The reader returns a list of signal with each signal corresponding
to a quantity. Since there is a small fluctuation in the step of the time axis,
the reader assumes that the step is constant and takes its mean, which is a
good approximation. Further release of HyperSpy will read the time axis more
precisely by supporting non-linear axis.</p>
</div>
</div>
<div class="section" id="reading-data-generated-by-hyperspy-using-other-software-packages">
<h2><a class="toc-backref" href="#id49">Reading data generated by HyperSpy using other software packages</a><a class="headerlink" href="#reading-data-generated-by-hyperspy-using-other-software-packages" title="Permalink to this headline">¶</a></h2>
<p>The following scripts may help reading data generated by HyperSpy using
other software packages.</p>
<div class="section" id="importrpl-digital-micrograph-plugin">
<span id="import-rpl"></span><h3><a class="toc-backref" href="#id50">ImportRPL Digital Micrograph plugin</a><a class="headerlink" href="#importrpl-digital-micrograph-plugin" title="Permalink to this headline">¶</a></h3>
<p>This Digital Micrograph plugin is designed to import Ripple files into Digital Micrograph.
It is used to ease data transit between DigitalMicrograph and HyperSpy without losing
the calibration using the extra keywords that HyperSpy adds to the standard format.</p>
<p>When executed it will ask for 2 files:</p>
<ol class="arabic simple">
<li><p>The riple file with the data  format and calibrations</p></li>
<li><p>The data itself in raw format.</p></li>
</ol>
<p>If a file with the same name and path as the riple file exits
with raw or bin extension it is opened directly without prompting</p>
<p>ImportRPL was written by Luiz Fernando Zagonel.</p>
<p><a class="reference external" href="https://github.com/downloads/hyperspy/ImportRPL/ImportRPL.s">Download ImportRPL</a></p>
</div>
<div class="section" id="readhyperspyh5-matlab-plugin">
<span id="hyperspy-matlab"></span><h3><a class="toc-backref" href="#id51">readHyperSpyH5 MATLAB Plugin</a><a class="headerlink" href="#readhyperspyh5-matlab-plugin" title="Permalink to this headline">¶</a></h3>
<p>This MATLAB script is designed to import HyperSpy’s saved HDF5 files (<code class="docutils literal notranslate"><span class="pre">.hspy</span></code> extension).
Like the Digital Micrograph script above, it is used to easily transfer data
from HyperSpy to MATLAB, while retaining spatial calibration information.</p>
<p>Download <code class="docutils literal notranslate"><span class="pre">readHyperSpyH5</span></code> from its <a class="reference external" href="https://github.com/jat255/readHyperSpyH5">Github repository</a>.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="events.html" class="btn btn-neutral float-right" title="Events" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="electron_holography.html" class="btn btn-neutral" title="Electron Holography" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2011-2018, The HyperSpy development team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/copybutton.js"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>