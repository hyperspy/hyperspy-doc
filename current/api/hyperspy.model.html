<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>hyperspy.model module &mdash; HyperSpy 1.7.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/hyperspy.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/toggleprompt.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="hyperspy.roi module" href="hyperspy.roi.html" />
    <link rel="prev" title="hyperspy.logger module" href="hyperspy.logger.html" />
 
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-25260850-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> HyperSpy
            <img src="../_static/hyperspy_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.7.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/changes.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/install.html">Installing HyperSpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/signal.html">The Signal class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/axes.html">Axes handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/interactive_operations_ROIs.html">Interactive Operations and Region of Interest (ROI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/signal1d.html">Signal1D Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/signal2d.html">Signal2D Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/visualisation.html">Data visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/mva.html">Machine learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/model.html">Model fitting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/eels.html">Electron Energy Loss Spectroscopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/eds.html">Energy-Dispersive X-ray Spectrometry (EDS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/dielectric_function.html">Dielectric function tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/electron_holography.html">Electron Holography</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/io.html">Loading and saving data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/events.html">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/big_data.html">Working with big data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/metadata_structure.html">Metadata structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/bibliography.html">Bibliography</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/git.html">Using Git and GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/testing.html">Running and writing tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/writing_docs.html">Writing documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/coding_style.html">Coding style</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/lazy_computations.html">Tips for writing methods that work on lazy signals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/speeding_up_code.html">Speeding up code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/writing_extensions.html">Writing packages that extend HyperSpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/useful_information.html">Useful information</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API References</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">hyperspy</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="hyperspy.html">hyperspy package</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="hyperspy.html#subpackages">Subpackages</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="hyperspy.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="hyperspy.Release.html">hyperspy.Release module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy._lazy_signals.html">hyperspy._lazy_signals module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.api.html">hyperspy.api module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.api_nogui.html">hyperspy.api_nogui module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.axes.html">hyperspy.axes module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.component.html">hyperspy.component module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.components1d.html">hyperspy.components1d module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.components2d.html">hyperspy.components2d module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.conftest.html">hyperspy.conftest module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.decorators.html">hyperspy.decorators module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.defaults_parser.html">hyperspy.defaults_parser module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.events.html">hyperspy.events module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.exceptions.html">hyperspy.exceptions module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.extensions.html">hyperspy.extensions module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.interactive.html">hyperspy.interactive module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.io.html">hyperspy.io module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.logger.html">hyperspy.logger module</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">hyperspy.model module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.roi.html">hyperspy.roi module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.samfire.html">hyperspy.samfire module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.signal.html">hyperspy.signal module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.signal_tools.html">hyperspy.signal_tools module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.signals.html">hyperspy.signals module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.ui_registry.html">hyperspy.ui_registry module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="hyperspy.html#module-hyperspy">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Credits and citation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../citing.html">Citing HyperSpy</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">HyperSpy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="modules.html">hyperspy</a> &raquo;</li>
          <li><a href="hyperspy.html">hyperspy package</a> &raquo;</li>
      <li>hyperspy.model module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api/hyperspy.model.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-hyperspy.model">
<span id="hyperspy-model-module"></span><h1>hyperspy.model module<a class="headerlink" href="#module-hyperspy.model" title="Permalink to this headline"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">hyperspy.model.</span></span><span class="sig-name descname"><span class="pre">BaseModel</span></span><a class="headerlink" href="#hyperspy.model.BaseModel" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a></p>
<p>Model and data fitting tools applicable to signals of both one and two
dimensions.</p>
<p>Models of one-dimensional signals should use the
<a class="reference internal" href="hyperspy.models.model1d.html#module-hyperspy.models.model1d" title="hyperspy.models.model1d"><code class="xref py py-class docutils literal notranslate"><span class="pre">model1d</span></code></a> and models of two-dimensional signals
should use the <a class="reference internal" href="hyperspy.models.model2d.html#module-hyperspy.models.model2d" title="hyperspy.models.model2d"><code class="xref py py-class docutils literal notranslate"><span class="pre">model2d</span></code></a>.</p>
<p>A model is constructed as a linear combination of
<a class="reference internal" href="hyperspy._components.html#module-hyperspy._components" title="hyperspy._components"><code class="xref py py-mod docutils literal notranslate"><span class="pre">_components</span></code></a> that are added to the model using the
<a class="reference internal" href="#hyperspy.model.BaseModel.append" title="hyperspy.model.BaseModel.append"><code class="xref py py-meth docutils literal notranslate"><span class="pre">append()</span></code></a> or
<a class="reference internal" href="#hyperspy.model.BaseModel.extend" title="hyperspy.model.BaseModel.extend"><code class="xref py py-meth docutils literal notranslate"><span class="pre">extend()</span></code></a>. There are many predefined
components available in the in the <a class="reference internal" href="hyperspy._components.html#module-hyperspy._components" title="hyperspy._components"><code class="xref py py-mod docutils literal notranslate"><span class="pre">_components</span></code></a>
module. If needed, new components can be created easily using the code of
existing components as a template.</p>
<p>Once defined, the model can be fitted to the data using <a class="reference internal" href="#hyperspy.model.BaseModel.fit" title="hyperspy.model.BaseModel.fit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">fit()</span></code></a> or
<a class="reference internal" href="#hyperspy.model.BaseModel.multifit" title="hyperspy.model.BaseModel.multifit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">multifit()</span></code></a>. Once the optimizer reaches
the convergence criteria or the maximum number of iterations the new value
of the component parameters are stored in the components.</p>
<p>It is possible to access the components in the model by their name or by
the index in the model. An example is given at the end of this docstring.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.signal">
<span class="sig-name descname"><span class="pre">signal</span></span><a class="headerlink" href="#hyperspy.model.BaseModel.signal" title="Permalink to this definition"></a></dt>
<dd><p>It contains the data to fit.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>BaseSignal instance</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.chisq">
<span class="sig-name descname"><span class="pre">chisq</span></span><a class="headerlink" href="#hyperspy.model.BaseModel.chisq" title="Permalink to this definition"></a></dt>
<dd><p>Chi-squared of the signal (or np.nan if not yet fit)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="hyperspy.signal.html#hyperspy.signal.BaseSignal" title="hyperspy.signal.BaseSignal"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseSignal</span></code></a> of float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.dof">
<span class="sig-name descname"><span class="pre">dof</span></span><a class="headerlink" href="#hyperspy.model.BaseModel.dof" title="Permalink to this definition"></a></dt>
<dd><p>Degrees of freedom of the signal (0 if not yet fit)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="hyperspy.signal.html#hyperspy.signal.BaseSignal" title="hyperspy.signal.BaseSignal"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseSignal</span></code></a> of int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.components">
<span class="sig-name descname"><span class="pre">components</span></span><a class="headerlink" href="#hyperspy.model.BaseModel.components" title="Permalink to this definition"></a></dt>
<dd><p>The components of the model are attributes of this class. This provides
a convenient way to access the model components when working in IPython
as it enables tab completion.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#hyperspy.model.ModelComponents" title="hyperspy.model.ModelComponents"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelComponents</span></code></a> instance</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">set_signal_range,</span> <span class="pre">remove_signal</span> <span class="pre">range,</span> <span class="pre">reset_signal_range,</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">add</span> <span class="pre">signal_range.</span></span></dt>
<dd><p>Customize the signal range to fit.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">fit,</span> <span class="pre">multifit</span></span></dt>
<dd><p>Fit the model to the data at the current position or the
full dataset.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">save_parameters2file,</span> <span class="pre">load_parameters_from_file</span></span></dt>
<dd><p>Save/load the parameter values to/from a file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.plot" title="Permalink to this definition"></a></dt>
<dd><p>Plot the model and the data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">enable_plot_components,</span> <span class="pre">disable_plot_components</span></span></dt>
<dd><p>Plot each component separately. (Use after <cite>plot</cite>.)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.set_current_values_to">
<span class="sig-name descname"><span class="pre">set_current_values_to</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.set_current_values_to" title="Permalink to this definition"></a></dt>
<dd><p>Set the current value of all the parameters of the given component as
the value for all the dataset.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">enable_adjust_position,</span> <span class="pre">disable_adjust_position</span></span></dt>
<dd><p>Enable/disable interactive adjustment of the position of the components
that have a well defined position. (Use after <cite>plot</cite>).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.fit_component">
<span class="sig-name descname"><span class="pre">fit_component</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.fit_component" title="Permalink to this definition"></a></dt>
<dd><p>Fit just the given component in the given signal range, that can be
set interactively.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">set_parameters_not_free,</span> <span class="pre">set_parameters_free</span></span></dt>
<dd><p>Fit the <cite>free</cite> status of several components and parameters at once.</p>
</dd></dl>

<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="hyperspy.models.model1d.html#hyperspy.models.model1d.Model1D" title="hyperspy.models.model1d.Model1D"><code class="xref py py-class docutils literal notranslate"><span class="pre">Model1D</span></code></a>, <a class="reference internal" href="hyperspy.models.model2d.html#hyperspy.models.model2d.Model2D" title="hyperspy.models.model2d.Model2D"><code class="xref py py-class docutils literal notranslate"><span class="pre">Model2D</span></code></a></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel._bounds_as_tuple">
<span class="sig-name descname"><span class="pre">_bounds_as_tuple</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel._bounds_as_tuple" title="Permalink to this definition"></a></dt>
<dd><p>Converts parameter bounds to tuples for least_squares()</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel._disable_ext_bounding">
<span class="sig-name descname"><span class="pre">_disable_ext_bounding</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">components</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel._disable_ext_bounding" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel._enable_ext_bounding">
<span class="sig-name descname"><span class="pre">_enable_ext_bounding</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">components</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel._enable_ext_bounding" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel._fetch_values_from_p0">
<span class="sig-name descname"><span class="pre">_fetch_values_from_p0</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">p_std</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel._fetch_values_from_p0" title="Permalink to this definition"></a></dt>
<dd><p>Fetch the parameter values from the output of the optimizer <cite>self.p0</cite>,
placing them in their appropriate <cite>component.parameter.value</cite> and <cite>…std</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>p_std</strong> (<em>array</em><em>, </em><em>optional</em>) – array containing the corresponding standard deviation.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel._free_parameters">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_free_parameters</span></span><a class="headerlink" href="#hyperspy.model.BaseModel._free_parameters" title="Permalink to this definition"></a></dt>
<dd><p>Get the free parameters of active components.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel._get_variance">
<span class="sig-name descname"><span class="pre">_get_variance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">only_current</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel._get_variance" title="Permalink to this definition"></a></dt>
<dd><p>Return the variance taking into account the <cite>channel_switches</cite>.
If only_current=True, the variance for the current navigation indices
is returned, otherwise the variance for all navigation indices is
returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel._linear_fit">
<span class="sig-name descname"><span class="pre">_linear_fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">optimizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lstsq'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calculate_errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">only_current</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel._linear_fit" title="Permalink to this definition"></a></dt>
<dd><p>Multivariate linear fitting</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>optimizer</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>default is &quot;lstsq&quot;</em>) – ‘lstsq’ - Default, supports lazy signal
‘ridge_regression’ - Supports regularisation, doesn’t support lazy
signal.</p></li>
<li><p><strong>calculate_errors</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>default is False</em>) – If True, calculate the errors.</p></li>
<li><p><strong>only_current</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>default is True</em>) – Fit the current index only, instead of the whole navigation space.</p></li>
<li><p><strong>kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a><em>, </em><em>optional</em>) – Keywords arguments are passed to
<a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.ridge_regression.html#sklearn.linear_model.ridge_regression" title="(in scikit-learn v1.0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">sklearn.linear_model.ridge_regression()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>More linear optimizers can be added in the future, but note that in order
to support simultaneous fitting across the dataset, the optimizer must
support “two-dimensional y” - see the <code class="docutils literal notranslate"><span class="pre">b</span></code> parameter in
<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.linalg.lstsq.html#numpy.linalg.lstsq" title="(in NumPy v1.22)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.linalg.lstsq()</span></code></a>.</p>
<p>Currently, the overhead in calculating the component data takes about
100 times longer than actually running <code class="xref py py-func docutils literal notranslate"><span class="pre">np.linalg.lstsq()</span></code>.
That means that going pixel-by-pixel, calculating the component data
each time is not faster than the normal nonlinear methods. Linear
fitting is hence currently only useful for fitting a dataset in the
vectorized manner.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel._load_dictionary">
<span class="sig-name descname"><span class="pre">_load_dictionary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dic</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel._load_dictionary" title="Permalink to this definition"></a></dt>
<dd><p>Load data from dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dic</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) – <p>A dictionary containing at least the following fields:</p>
<ul class="simple">
<li><p>_whitelist: a dictionary with keys used as references of save
attributes, for more information, see
<a class="reference internal" href="hyperspy.misc.export_dictionary.html#hyperspy.misc.export_dictionary.load_from_dictionary" title="hyperspy.misc.export_dictionary.load_from_dictionary"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_from_dictionary()</span></code></a></p></li>
<li><p>components: a dictionary, with information about components of
the model (see
<a class="reference internal" href="hyperspy.component.html#hyperspy.component.Parameter.as_dictionary" title="hyperspy.component.Parameter.as_dictionary"><code class="xref py py-meth docutils literal notranslate"><span class="pre">as_dictionary()</span></code></a>
documentation for more details)</p></li>
<li><p>any field from _whitelist.keys()</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel._on_navigating">
<span class="sig-name descname"><span class="pre">_on_navigating</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel._on_navigating" title="Permalink to this definition"></a></dt>
<dd><p>Same as fetch_stored_values but without update_on_resume since
the model plot is updated in the figure update callback.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel._set_boundaries">
<span class="sig-name descname"><span class="pre">_set_boundaries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bounded</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel._set_boundaries" title="Permalink to this definition"></a></dt>
<dd><p>Generate the boundary list.</p>
<p>Necessary before fitting with a boundary aware optimizer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>bounded</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>default True</em>) – If True, loops through the model components and
populates the free parameter boundaries.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel._set_mpfit_parameters_info">
<span class="sig-name descname"><span class="pre">_set_mpfit_parameters_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bounded</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel._set_mpfit_parameters_info" title="Permalink to this definition"></a></dt>
<dd><p>Generate the boundary list for mpfit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>bounded</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>default True</em>) – If True, loops through the model components and
populates the free parameter boundaries.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel._set_p0">
<span class="sig-name descname"><span class="pre">_set_p0</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel._set_p0" title="Permalink to this definition"></a></dt>
<dd><p>Sets the initial values for the parameters used in the curve fitting
functions</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.active_components">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">active_components</span></span><a class="headerlink" href="#hyperspy.model.BaseModel.active_components" title="Permalink to this definition"></a></dt>
<dd><p>List all nonlinear parameters.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.append">
<span class="sig-name descname"><span class="pre">append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">thing</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.append" title="Permalink to this definition"></a></dt>
<dd><p>Add component to Model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>thing</strong> (<cite>Component</cite> instance.) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.as_dictionary">
<span class="sig-name descname"><span class="pre">as_dictionary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fullcopy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.as_dictionary" title="Permalink to this definition"></a></dt>
<dd><p>Returns a dictionary of the model, including all components, degrees
of freedom (dof) and chi-squared (chisq) with values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fullcopy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em> (</em><em>optional</em><em>, </em><em>True</em><em>)</em>) – Copies of objects are stored, not references. If any found,
functions will be pickled and signals converted to dictionaries</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><strong>dictionary</strong> – A dictionary including at least the following fields:</p>
<ul class="simple">
<li><p>components: a list of dictionaries of components, one per
component</p></li>
<li><p>_whitelist: a dictionary with keys used as references for saved
attributes, for more information, see
<a class="reference internal" href="hyperspy.misc.export_dictionary.html#hyperspy.misc.export_dictionary.export_to_dictionary" title="hyperspy.misc.export_dictionary.export_to_dictionary"><code class="xref py py-func docutils literal notranslate"><span class="pre">export_to_dictionary()</span></code></a></p></li>
<li><p>any field from _whitelist.keys()</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)">dict</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">signals</span><span class="o">.</span><span class="n">Signal1D</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">create_model</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l1</span> <span class="o">=</span> <span class="n">components1d</span><span class="o">.</span><span class="n">Lorentzian</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l2</span> <span class="o">=</span> <span class="n">components1d</span><span class="o">.</span><span class="n">Lorentzian</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">as_dictionary</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m2</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">create_model</span><span class="p">(</span><span class="n">dictionary</span><span class="o">=</span><span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.as_signal">
<span class="sig-name descname"><span class="pre">as_signal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">component_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_of_range_to_nan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_progressbar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.as_signal" title="Permalink to this definition"></a></dt>
<dd><p>Returns a recreation of the dataset using the model.</p>
<p>By default, the signal range outside of the fitted range is filled with nans.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>component_list</strong> (<em>list of HyperSpy components</em><em>, </em><em>optional</em>) – If a list of components is given, only the components given in the
list is used in making the returned spectrum. The components can
be specified by name, index or themselves.</p></li>
<li><p><strong>out_of_range_to_nan</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If True the signal range outside of the fitted range is filled with
nans. Default True.</p></li>
<li><p><strong>show_progressbar</strong> (<em>None</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, display a progress bar. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, the default from
the preferences settings is used.</p></li>
<li><p><strong>out</strong> (<em>{None</em><em>, </em><em>BaseSignal}</em>) – The signal where to put the result into. Convenient for parallel
processing. If None (default), creates a new one. If passed, it is
assumed to be of correct shape and dtype and not checked.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>BaseSignal</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>An instance of the same class as <cite>BaseSignal</cite>.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">Signal1D</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">create_model</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l1</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">components1D</span><span class="o">.</span><span class="n">Lorentzian</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l2</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">components1D</span><span class="o">.</span><span class="n">Lorentzian</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s1</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">as_signal</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s2</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">as_signal</span><span class="p">(</span><span class="n">component_list</span><span class="o">=</span><span class="p">[</span><span class="n">l1</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.assign_current_values_to_all">
<span class="sig-name descname"><span class="pre">assign_current_values_to_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">components_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.assign_current_values_to_all" title="Permalink to this definition"></a></dt>
<dd><p>Set parameter values for all positions to the current ones.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>component_list</strong> (<em>list of components</em><em>, </em><em>optional</em>) – If a list of components is given, the operation will be performed
only in the value of the parameters of the given components.
The components can be specified by name, index or themselves.
If <code class="docutils literal notranslate"><span class="pre">None</span></code> (default), the active components will be considered.</p></li>
<li><p><strong>mask</strong> (<em>boolean numpy array</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – The operation won’t be performed where mask is True.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.create_samfire">
<span class="sig-name descname"><span class="pre">create_samfire</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">setup</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.create_samfire" title="Permalink to this definition"></a></dt>
<dd><p>Creates a SAMFire object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>workers</strong> (<em>{None</em><em>, </em><em>int}</em>) – the number of workers to initialise.
If zero, all computations will be done serially.
If None (default), will attempt to use (number-of-cores - 1),
however if just one core is available, will use one worker.</p></li>
<li><p><strong>setup</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – if the setup should be run upon initialization.</p></li>
<li><p><strong>**kwargs</strong> – Any that will be passed to the _setup and in turn SamfirePool.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.ensure_parameters_in_bounds">
<span class="sig-name descname"><span class="pre">ensure_parameters_in_bounds</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.ensure_parameters_in_bounds" title="Permalink to this definition"></a></dt>
<dd><p>For all active components, snaps their free parameter values to
be within their boundaries (if bounded). Does not touch the array of
values.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.export_results">
<span class="sig-name descname"><span class="pre">export_results</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'hspy'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_std</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">only_free</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">only_active</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.export_results" title="Permalink to this definition"></a></dt>
<dd><p>Export the results of the parameters of the model to the desired
folder.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em> or </em><em>None</em>) – The path to the folder where the file will be saved. If <cite>None</cite> the
current folder is used by default.</p></li>
<li><p><strong>format</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The extension of the file format. It must be one of the
fileformats supported by HyperSpy. The default is “hspy”.</p></li>
<li><p><strong>save_std</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If True, also the standard deviation will be saved.</p></li>
<li><p><strong>only_free</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If True, only the value of the parameters that are free will be
exported.</p></li>
<li><p><strong>only_active</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If True, only the value of the active parameters will be exported.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The name of the files will be determined by each the Component and
each Parameter name attributes. Therefore, it is possible to customise
the file names modify the name attributes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.extend">
<span class="sig-name descname"><span class="pre">extend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iterable</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.extend" title="Permalink to this definition"></a></dt>
<dd><p>Append multiple components to the model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>iterable</strong> (iterable of <cite>Component</cite> instances.) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.fetch_stored_values">
<span class="sig-name descname"><span class="pre">fetch_stored_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">only_fixed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_on_resume</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.fetch_stored_values" title="Permalink to this definition"></a></dt>
<dd><p>Fetch the value of the parameters that have been previously stored
in <cite>parameter.map[‘values’]</cite> if <cite>parameter.map[‘is_set’]</cite> is <cite>True</cite> for
those indices.</p>
<p>If it is not previously stored, the current values from <cite>parameter.value</cite>
are used, which are typically from the fit in the previous pixel of a
multidimensional signal.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>only_fixed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>optional</em>) – If True, only the fixed parameters are fetched.</p></li>
<li><p><strong>update_on_resume</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>optional</em>) – If True, update the model plot after values are updated.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#hyperspy.model.BaseModel.store_current_values" title="hyperspy.model.BaseModel.store_current_values"><code class="xref py py-obj docutils literal notranslate"><span class="pre">store_current_values</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.fetch_values_from_array">
<span class="sig-name descname"><span class="pre">fetch_values_from_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array_std</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.fetch_values_from_array" title="Permalink to this definition"></a></dt>
<dd><p>Fetch the parameter values from the given array, optionally also
fetching the standard deviations.</p>
<p>Places the parameter values into both <cite>m.p0</cite> (the initial values
for the optimizer routine) and <cite>component.parameter.value</cite> and
<cite>…std</cite>, for parameters in active components ordered by their
position in the model and component.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<em>array</em>) – array with the parameter values</p></li>
<li><p><strong>array_std</strong> (<em>{None</em><em>, </em><em>array}</em>) – array with the standard deviations of parameters</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">optimizer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lm'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loss_function</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ls'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fd'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bounded</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fd_scheme</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'2-point'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.fit" title="Permalink to this definition"></a></dt>
<dd><p>Fits the model to the experimental data.</p>
<p>Read more in the <a class="reference internal" href="../user_guide/model.html#id1"><span class="std std-ref">User Guide</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>optimizer</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em> or </em><em>None</em><em>, </em><em>default None</em>) – <p>The optimization algorithm used to perform the fitting.</p>
<blockquote>
<div><ul>
<li><p>”lm” performs least-squares optimization using the
Levenberg-Marquardt algorithm, and supports bounds
on parameters.</p></li>
<li><p>”trf” performs least-squares optimization using the
Trust Region Reflective algorithm, and supports
bounds on parameters.</p></li>
<li><p>”dogbox” performs least-squares optimization using the
dogleg algorithm with rectangular trust regions, and
supports bounds on parameters.</p></li>
<li><p>”odr” performs the optimization using the orthogonal
distance regression (ODR) algorithm. It does not support
bounds on parameters. See <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/odr.html#module-scipy.odr" title="(in SciPy v1.8.0)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">scipy.odr</span></code></a> for more details.</p></li>
<li><p>All of the available methods for <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.minimize.html#scipy.optimize.minimize" title="(in SciPy v1.8.0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.optimize.minimize()</span></code></a>
can be used here. See the <a class="reference internal" href="../user_guide/model.html#id1"><span class="std std-ref">User Guide</span></a>
documentation for more details.</p></li>
<li><p>”Differential Evolution” is a global optimization method.
It does support bounds on parameters. See
<a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.differential_evolution.html#scipy.optimize.differential_evolution" title="(in SciPy v1.8.0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.optimize.differential_evolution()</span></code></a> for more
details on available options.</p></li>
<li><p>”Dual Annealing” is a global optimization method.
It does support bounds on parameters. See
<a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.dual_annealing.html#scipy.optimize.dual_annealing" title="(in SciPy v1.8.0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.optimize.dual_annealing()</span></code></a> for more
details on available options. Requires <code class="docutils literal notranslate"><span class="pre">scipy</span> <span class="pre">&gt;=</span> <span class="pre">1.2.0</span></code>.</p></li>
<li><p>”SHGO” (simplicial homology global optimization” is a global
optimization method. It does support bounds on parameters. See
<a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.shgo.html#scipy.optimize.shgo" title="(in SciPy v1.8.0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.optimize.shgo()</span></code></a> for more details on available
options. Requires <code class="docutils literal notranslate"><span class="pre">scipy</span> <span class="pre">&gt;=</span> <span class="pre">1.2.0</span></code>.</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>loss_function</strong> (<em>{&quot;ls&quot;</em><em>, </em><em>&quot;ML-poisson&quot;</em><em>, </em><em>&quot;huber&quot;</em><em>, </em><em>callable}</em><em>, </em><em>default &quot;ls&quot;</em>) – <p>The loss function to use for minimization. Only <code class="docutils literal notranslate"><span class="pre">&quot;ls&quot;</span></code> is available
if <code class="docutils literal notranslate"><span class="pre">optimizer</span></code> is one of <code class="docutils literal notranslate"><span class="pre">[&quot;lm&quot;,</span> <span class="pre">&quot;trf&quot;,</span> <span class="pre">&quot;dogbox&quot;,</span> <span class="pre">&quot;odr&quot;]</span></code>.</p>
<blockquote>
<div><ul>
<li><p>”ls” minimizes the least-squares loss function.</p></li>
<li><p>”ML-poisson” minimizes the negative log-likelihood for
Poisson-distributed data. Also known as Poisson maximum
likelihood estimation (MLE).</p></li>
<li><p>”huber” minimize the Huber loss function. The delta value
of the Huber function is controlled by the <code class="docutils literal notranslate"><span class="pre">huber_delta</span></code>
keyword argument (the default value is 1.0).</p></li>
<li><p>callable supports passing your own minimization function.</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>grad</strong> (<em>{&quot;fd&quot;</em><em>, </em><em>&quot;analytical&quot;</em><em>, </em><em>callable</em><em>, </em><em>None}</em><em>, </em><em>default &quot;fd&quot;</em>) – <p>Whether to use information about the gradient of the loss function
as part of the optimization. This parameter has no effect if
<code class="docutils literal notranslate"><span class="pre">optimizer</span></code> is a derivative-free or global optimization method.</p>
<blockquote>
<div><ul>
<li><p>”fd” uses a finite difference scheme (if available) for numerical
estimation of the gradient. The scheme can be further controlled
with the <code class="docutils literal notranslate"><span class="pre">fd_scheme</span></code> keyword argument.</p></li>
<li><p>”analytical” uses the analytical gradient (if available) to speed
up the optimization, since the gradient does not need to be estimated.</p></li>
<li><p>callable should be a function that returns the gradient vector.</p></li>
<li><p>None means that no gradient information is used or estimated. Not
available if <code class="docutils literal notranslate"><span class="pre">optimizer</span></code> is in <code class="docutils literal notranslate"><span class="pre">[&quot;lm&quot;,</span> <span class="pre">&quot;trf&quot;,</span> <span class="pre">``&quot;dogbox&quot;</span></code>].</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>bounded</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>default False</em>) – If True, performs bounded parameter optimization if
supported by <code class="docutils literal notranslate"><span class="pre">optimizer</span></code>.</p></li>
<li><p><strong>update_plot</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>default False</em>) – If True, the plot is updated during the optimization
process. It slows down the optimization, but it enables
visualization of the optimization progress.</p></li>
<li><p><strong>print_info</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>default False</em>) – If True, print information about the fitting results, which
are also stored in <code class="docutils literal notranslate"><span class="pre">model.fit_output</span></code> in the form of
a <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.OptimizeResult.html#scipy.optimize.OptimizeResult" title="(in SciPy v1.8.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">scipy.optimize.OptimizeResult</span></code></a> object.</p></li>
<li><p><strong>return_info</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>default True</em>) – If True, returns the fitting results in the form of
a <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.OptimizeResult.html#scipy.optimize.OptimizeResult" title="(in SciPy v1.8.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">scipy.optimize.OptimizeResult</span></code></a> object.</p></li>
<li><p><strong>fd_scheme</strong> (<em>str {&quot;2-point&quot;</em><em>, </em><em>&quot;3-point&quot;</em><em>, </em><em>&quot;cs&quot;}</em><em>, </em><em>default &quot;2-point&quot;</em>) – If <code class="docutils literal notranslate"><span class="pre">grad='fd'</span></code>, selects the finite difference scheme to use.
See <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.minimize.html#scipy.optimize.minimize" title="(in SciPy v1.8.0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.optimize.minimize()</span></code></a> for details. Ignored if
<code class="docutils literal notranslate"><span class="pre">optimizer</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;lm&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;trf&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;dogbox&quot;</span></code>.</p></li>
<li><p><strong>**kwargs</strong> (<em>keyword arguments</em>) – Any extra keyword argument will be passed to the chosen
optimizer. For more information, read the docstring of the
optimizer of your choice in <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/optimize.html#module-scipy.optimize" title="(in SciPy v1.8.0)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">scipy.optimize</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The chi-squared and reduced chi-squared statistics, and the
degrees of freedom, are computed automatically when fitting,
only when <cite>loss_function=”ls”</cite>. They are stored as signals:
<code class="docutils literal notranslate"><span class="pre">chisq</span></code>, <code class="docutils literal notranslate"><span class="pre">red_chisq</span></code> and <code class="docutils literal notranslate"><span class="pre">dof</span></code>.</p>
<p>If the attribute <code class="docutils literal notranslate"><span class="pre">metada.Signal.Noise_properties.variance</span></code>
is defined as a <code class="docutils literal notranslate"><span class="pre">Signal</span></code> instance with the same
<code class="docutils literal notranslate"><span class="pre">navigation_dimension</span></code> as the signal, and <code class="docutils literal notranslate"><span class="pre">loss_function</span></code>
is <code class="docutils literal notranslate"><span class="pre">&quot;ls&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;huber&quot;</span></code>, then a weighted fit is performed,
using the inverse of the noise variance as the weights.</p>
<p>Note that for both homoscedastic and heteroscedastic noise, if
<code class="docutils literal notranslate"><span class="pre">metadata.Signal.Noise_properties.variance</span></code> does not contain
an accurate estimation of the variance of the data, then the
chi-squared and reduced chi-squared statistics will not be be
computed correctly. See the <a class="reference internal" href="../user_guide/signal.html#signal-noise-properties"><span class="std std-ref">Setting the noise properties</span></a> in the User Guide for more details.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference internal" href="#hyperspy.model.BaseModel.multifit" title="hyperspy.model.BaseModel.multifit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">multifit()</span></code></a></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">fit()</span></code></p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.gui">
<span class="sig-name descname"><span class="pre">gui</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">display</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">toolkit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.gui" title="Permalink to this definition"></a></dt>
<dd><p>Display or return interactive GUI element if available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>display</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If True, display the user interface widgets. If False, return the
widgets container in a dictionary, usually for customisation or
testing.</p></li>
<li><p><strong>toolkit</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>iterable of strings</em><em> or </em><em>None</em>) – If None (default), all available widgets are displayed or returned.
If string, only the widgets of the selected toolkit are displayed
if available. If an interable of toolkit strings, the widgets of
all listed toolkits are displayed or returned.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.insert">
<span class="sig-name descname"><span class="pre">insert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.insert" title="Permalink to this definition"></a></dt>
<dd><p>Insert object before index.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.load_parameters_from_file">
<span class="sig-name descname"><span class="pre">load_parameters_from_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.load_parameters_from_file" title="Permalink to this definition"></a></dt>
<dd><p>Loads the parameters array from  a binary file written with the
‘save_parameters2file’ function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#hyperspy.model.BaseModel.save_parameters2file" title="hyperspy.model.BaseModel.save_parameters2file"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_parameters2file</span></code></a>, <a class="reference internal" href="#hyperspy.model.BaseModel.export_results" title="hyperspy.model.BaseModel.export_results"><code class="xref py py-obj docutils literal notranslate"><span class="pre">export_results</span></code></a></p>
</div>
<p class="rubric">Notes</p>
<p>In combination with <cite>save_parameters2file</cite>, this method can be used to
recreate a model stored in a file. Actually, before HyperSpy 0.8 this
is the only way to do so.  However, this is known to be brittle. For
example see <a class="reference external" href="https://github.com/hyperspy/hyperspy/issues/341">https://github.com/hyperspy/hyperspy/issues/341</a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.multifit">
<span class="sig-name descname"><span class="pre">multifit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fetch_only_fixed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autosave</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autosave_every</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_progressbar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interactive_plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iterpath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.multifit" title="Permalink to this definition"></a></dt>
<dd><p>Fit the data to the model at all positions of the navigation dimensions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mask</strong> (<em>np.ndarray</em><em>, </em><em>optional</em>) – To mask (i.e. do not fit) at certain position, pass a boolean
numpy.array, where True indicates that the data will NOT be
fitted at the given position.</p></li>
<li><p><strong>fetch_only_fixed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>default False</em>) – If True, only the fixed parameters values will be updated
when changing the positon.</p></li>
<li><p><strong>autosave</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>default False</em>) – If True, the result of the fit will be saved automatically
with a frequency defined by autosave_every.</p></li>
<li><p><strong>autosave_every</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>default 10</em>) – Save the result of fitting every given number of spectra.</p></li>
<li><p><strong>show_progressbar</strong> (<em>None</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, display a progress bar. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, the default from
the preferences settings is used.</p></li>
<li><p><strong>interactive_plot</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>default False</em>) – If True, update the plot for every position as they are processed.
Note that this slows down the fitting by a lot, but it allows for
interactive monitoring of the fitting (if in interactive mode).</p></li>
<li><p><strong>iterpath</strong> (<em>{None</em><em>, </em><em>&quot;flyback&quot;</em><em>, </em><em>&quot;serpentine&quot;}</em><em>, </em><em>default None</em>) – <dl class="simple">
<dt>If “flyback”:</dt><dd><p>At each new row the index begins at the first column,
in accordance with the way <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndindex.html#numpy.ndindex" title="(in NumPy v1.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndindex</span></code></a> generates indices.</p>
</dd>
<dt>If “serpentine”:</dt><dd><p>Iterate through the signal in a serpentine, “snake-game”-like
manner instead of beginning each new row at the first index.
Works for n-dimensional navigation space, not just 2D.</p>
</dd>
<dt>If None:</dt><dd><p>Currently <code class="docutils literal notranslate"><span class="pre">None</span> <span class="pre">-&gt;</span> <span class="pre">&quot;flyback&quot;</span></code>. The default argument will use
the <code class="docutils literal notranslate"><span class="pre">&quot;flyback&quot;</span></code> iterpath, but shows a warning that this will
change to <code class="docutils literal notranslate"><span class="pre">&quot;serpentine&quot;</span></code> in version 2.0.</p>
</dd>
</dl>
</p></li>
<li><p><strong>**kwargs</strong> (<em>keyword arguments</em>) – Any extra keyword argument will be passed to the fit method.
See the documentation for <a class="reference internal" href="#hyperspy.model.BaseModel.fit" title="hyperspy.model.BaseModel.fit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">fit()</span></code></a>
for a list of valid arguments.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference internal" href="#hyperspy.model.BaseModel.fit" title="hyperspy.model.BaseModel.fit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">fit()</span></code></a></p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.plot_results">
<span class="sig-name descname"><span class="pre">plot_results</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">only_free</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">only_active</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.plot_results" title="Permalink to this definition"></a></dt>
<dd><p>Plot the value of the parameters of the model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>only_free</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If True, only the value of the parameters that are free will be
plotted.</p></li>
<li><p><strong>only_active</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If True, only the value of the active parameters will be plotted.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The name of the files will be determined by each the Component and
each Parameter name attributes. Therefore, it is possible to customise
the file names modify the name attributes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.print_current_values">
<span class="sig-name descname"><span class="pre">print_current_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">only_free</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">only_active</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fancy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.print_current_values" title="Permalink to this definition"></a></dt>
<dd><p>Prints the current values of the parameters of all components.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>only_free</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If True, only components with free parameters will be printed. Within these,
only parameters which are free will be printed.</p></li>
<li><p><strong>only_active</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If True, only values of active components will be printed</p></li>
<li><p><strong>component_list</strong> (<em>None</em><em> or </em><em>list of components.</em>) – If None, print all components.</p></li>
<li><p><strong>fancy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If True, attempts to print using html rather than text in the notebook.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.red_chisq">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">red_chisq</span></span><a class="headerlink" href="#hyperspy.model.BaseModel.red_chisq" title="Permalink to this definition"></a></dt>
<dd><p>Reduced chi-squared.
Calculated from <code class="docutils literal notranslate"><span class="pre">self.chisq</span></code> and <code class="docutils literal notranslate"><span class="pre">self.dof</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="hyperspy.signal.html#hyperspy.signal.BaseSignal" title="hyperspy.signal.BaseSignal"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseSignal</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.remove">
<span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">thing</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.remove" title="Permalink to this definition"></a></dt>
<dd><p>Remove component from model.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">Signal1D</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">create_model</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">components1D</span><span class="o">.</span><span class="n">Gaussian</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
</pre></div>
</div>
<p>You could remove <cite>g</cite> like this</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
</pre></div>
</div>
<p>Like this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;Gaussian&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or like this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.save" title="Permalink to this definition"></a></dt>
<dd><p>Saves signal and its model to a file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Name of the file</p></li>
<li><p><strong>name</strong> (<em>{None</em><em>, </em><em>str}</em>) – Stored model name. Auto-generated if left empty</p></li>
<li><p><strong>**kwargs</strong> – Other keyword arguments are passed onto <cite>BaseSignal.save()</cite></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.save_parameters2file">
<span class="sig-name descname"><span class="pre">save_parameters2file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.save_parameters2file" title="Permalink to this definition"></a></dt>
<dd><p>Save the parameters array in binary format.</p>
<p>The data is saved to a single file in numpy’s uncompressed <code class="docutils literal notranslate"><span class="pre">.npz</span></code>
format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#hyperspy.model.BaseModel.load_parameters_from_file" title="hyperspy.model.BaseModel.load_parameters_from_file"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_parameters_from_file</span></code></a>, <a class="reference internal" href="#hyperspy.model.BaseModel.export_results" title="hyperspy.model.BaseModel.export_results"><code class="xref py py-obj docutils literal notranslate"><span class="pre">export_results</span></code></a></p>
</div>
<p class="rubric">Notes</p>
<p>This method can be used to save the current state of the model in a way
that can be loaded back to recreate the it using <cite>load_parameters_from
file</cite>. Actually, as of HyperSpy 0.8 this is the only way to do so.
However, this is known to be brittle. For example see
<a class="reference external" href="https://github.com/hyperspy/hyperspy/issues/341">https://github.com/hyperspy/hyperspy/issues/341</a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.set_component_active_value">
<span class="sig-name descname"><span class="pre">set_component_active_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">only_current</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.set_component_active_value" title="Permalink to this definition"></a></dt>
<dd><p>Sets the component ‘active’ parameter to a specified value</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – The new value of the ‘active’ parameter</p></li>
<li><p><strong>component_list</strong> (<em>list of hyperspy components</em><em>, </em><em>optional</em>) – A list of components whose parameters will changed. The components
can be specified by name, index or themselves.</p></li>
<li><p><strong>only_current</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>default False</em>) – If True, will only change the parameter value at the current
position in the model.
If False, will change the parameter value for all the positions.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v1</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">components1D</span><span class="o">.</span><span class="n">Voigt</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v2</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">components1D</span><span class="o">.</span><span class="n">Voigt</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">set_component_active_value</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">set_component_active_value</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">component_list</span><span class="o">=</span><span class="p">[</span><span class="n">v1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">set_component_active_value</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">component_list</span><span class="o">=</span><span class="p">[</span><span class="n">v1</span><span class="p">],</span>
<span class="go">                                 only_current=True)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.set_parameters_free">
<span class="sig-name descname"><span class="pre">set_parameters_free</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">component_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameter_name_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">only_linear</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">only_nonlinear</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.set_parameters_free" title="Permalink to this definition"></a></dt>
<dd><p>Sets the parameters in a component in a model to free.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>component_list</strong> (<em>None</em><em>, or </em><em>list of hyperspy components</em><em>, </em><em>optional</em>) – If None, will apply the function to all components in the model.
If list of components, will apply the functions to the components
in the list. The components can be specified by name, index or
themselves.</p></li>
<li><p><strong>parameter_name_list</strong> (<em>None</em><em> or </em><em>list of strings</em><em>, </em><em>optional</em>) – If None, will set all the parameters to not free.
If list of strings, will set all the parameters with the same name
as the strings in parameter_name_list to not free.</p></li>
<li><p><strong>only_linear</strong> (<em>Bool</em>) – If True, will only set parameters that are linear to not free.</p></li>
<li><p><strong>only_nonlinear</strong> (<em>Bool</em>) – If True, will only set parameters that are nonlinear to not free.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v1</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">components1D</span><span class="o">.</span><span class="n">Voigt</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">set_parameters_free</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">set_parameters_free</span><span class="p">(</span><span class="n">component_list</span><span class="o">=</span><span class="p">[</span><span class="n">v1</span><span class="p">],</span>
<span class="go">                          parameter_name_list=[&#39;area&#39;,&#39;centre&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">set_parameters_free</span><span class="p">(</span><span class="n">only_linear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#hyperspy.model.BaseModel.set_parameters_not_free" title="hyperspy.model.BaseModel.set_parameters_not_free"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_parameters_not_free</span></code></a>, <a class="reference internal" href="hyperspy.component.html#hyperspy.component.Component.set_parameters_free" title="hyperspy.component.Component.set_parameters_free"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hyperspy.component.Component.set_parameters_free</span></code></a>, <a class="reference internal" href="hyperspy.component.html#hyperspy.component.Component.set_parameters_not_free" title="hyperspy.component.Component.set_parameters_not_free"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hyperspy.component.Component.set_parameters_not_free</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.set_parameters_not_free">
<span class="sig-name descname"><span class="pre">set_parameters_not_free</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">component_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameter_name_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">only_linear</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">only_nonlinear</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.set_parameters_not_free" title="Permalink to this definition"></a></dt>
<dd><p>Sets the parameters in a component in a model to not free.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>component_list</strong> (<em>None</em><em>, or </em><em>list of hyperspy components</em><em>, </em><em>optional</em>) – If None, will apply the function to all components in the model.
If list of components, will apply the functions to the components
in the list.  The components can be specified by name, index or
themselves.</p></li>
<li><p><strong>parameter_name_list</strong> (<em>None</em><em> or </em><em>list of strings</em><em>, </em><em>optional</em>) – If None, will set all the parameters to not free.
If list of strings, will set all the parameters with the same name
as the strings in parameter_name_list to not free.</p></li>
<li><p><strong>only_linear</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If True, will only set parameters that are linear to free.</p></li>
<li><p><strong>only_nonlinear</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If True, will only set parameters that are nonlinear to free.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v1</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">components1D</span><span class="o">.</span><span class="n">Voigt</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">set_parameters_not_free</span><span class="p">()</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">set_parameters_not_free</span><span class="p">(</span><span class="n">component_list</span><span class="o">=</span><span class="p">[</span><span class="n">v1</span><span class="p">],</span>
<span class="go">                              parameter_name_list=[&#39;area&#39;,&#39;centre&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">set_parameters_not_free</span><span class="p">(</span><span class="n">only_linear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#hyperspy.model.BaseModel.set_parameters_free" title="hyperspy.model.BaseModel.set_parameters_free"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_parameters_free</span></code></a>, <a class="reference internal" href="hyperspy.component.html#hyperspy.component.Component.set_parameters_free" title="hyperspy.component.Component.set_parameters_free"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hyperspy.component.Component.set_parameters_free</span></code></a>, <a class="reference internal" href="hyperspy.component.html#hyperspy.component.Component.set_parameters_not_free" title="hyperspy.component.Component.set_parameters_not_free"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hyperspy.component.Component.set_parameters_not_free</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.set_parameters_value">
<span class="sig-name descname"><span class="pre">set_parameters_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameter_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">only_current</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.set_parameters_value" title="Permalink to this definition"></a></dt>
<dd><p>Sets the value of a parameter in components in a model to a specified
value</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parameter_name</strong> (<em>string</em>) – Name of the parameter whose value will be changed</p></li>
<li><p><strong>value</strong> (<em>number</em>) – The new value of the parameter</p></li>
<li><p><strong>component_list</strong> (<em>list of hyperspy components</em><em>, </em><em>optional</em>) – A list of components whose parameters will changed. The components
can be specified by name, index or themselves.</p></li>
<li><p><strong>only_current</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>default False</em>) – If True, will only change the parameter value at the current
position in the model.
If False, will change the parameter value for all the positions.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v1</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">components1D</span><span class="o">.</span><span class="n">Voigt</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v2</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">components1D</span><span class="o">.</span><span class="n">Voigt</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">set_parameters_value</span><span class="p">(</span><span class="s1">&#39;area&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">set_parameters_value</span><span class="p">(</span><span class="s1">&#39;area&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">component_list</span><span class="o">=</span><span class="p">[</span><span class="n">v1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">set_parameters_value</span><span class="p">(</span><span class="s1">&#39;area&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">component_list</span><span class="o">=</span><span class="p">[</span><span class="n">v1</span><span class="p">],</span>
<span class="go">                           only_current=True)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.store">
<span class="sig-name descname"><span class="pre">store</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.store" title="Permalink to this definition"></a></dt>
<dd><p>Stores current model in the original signal</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>{None</em><em>, </em><em>str}</em>) – Stored model name. Auto-generated if left empty</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.store_current_values">
<span class="sig-name descname"><span class="pre">store_current_values</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.store_current_values" title="Permalink to this definition"></a></dt>
<dd><p>Store the parameters of the current coordinates into the
<cite>parameter.map</cite> array and sets the <cite>is_set</cite> array attribute to True.</p>
<p>If the parameters array has not being defined yet it creates it filling
it with the current parameters at the current indices in the array.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.suspend_update">
<span class="sig-name descname"><span class="pre">suspend_update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">update_on_resume</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.suspend_update" title="Permalink to this definition"></a></dt>
<dd><p>Prevents plot from updating until ‘with’ clause completes.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#hyperspy.model.BaseModel.update_plot" title="hyperspy.model.BaseModel.update_plot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_plot</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.model.BaseModel.update_plot">
<span class="sig-name descname"><span class="pre">update_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">render_figure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_ylimits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.BaseModel.update_plot" title="Permalink to this definition"></a></dt>
<dd><p>Update model plot.</p>
<p>The updating can be suspended using <cite>suspend_update</cite>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#hyperspy.model.BaseModel.suspend_update" title="hyperspy.model.BaseModel.suspend_update"><code class="xref py py-obj docutils literal notranslate"><span class="pre">suspend_update</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="hyperspy.model.ModelComponents">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">hyperspy.model.</span></span><span class="sig-name descname"><span class="pre">ModelComponents</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model.ModelComponents" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Container for model components.</p>
<p>Useful to provide tab completion when running in IPython.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.model._check_deprecated_optimizer">
<span class="sig-prename descclassname"><span class="pre">hyperspy.model.</span></span><span class="sig-name descname"><span class="pre">_check_deprecated_optimizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">optimizer</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model._check_deprecated_optimizer" title="Permalink to this definition"></a></dt>
<dd><p>Can be removed in HyperSpy 2.0</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.model._twinned_parameter">
<span class="sig-prename descclassname"><span class="pre">hyperspy.model.</span></span><span class="sig-name descname"><span class="pre">_twinned_parameter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameter</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.model._twinned_parameter" title="Permalink to this definition"></a></dt>
<dd><p>Used in linear fitting. Since twinned parameters are not free, we need to
construct a mapping between the twinned parameter and the parameter
component to which the (non-free) twinned parameter component value needs
to be added.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>parameter when there is a twin and this twin is free</em></p></li>
<li><p><em>None when there is no twin or when the twin is not non-free itself, which</em></p></li>
<li><p><em>implies that the original parameter is not free</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="hyperspy.logger.html" class="btn btn-neutral float-left" title="hyperspy.logger module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="hyperspy.roi.html" class="btn btn-neutral float-right" title="hyperspy.roi module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2011-2022, The HyperSpy development team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>