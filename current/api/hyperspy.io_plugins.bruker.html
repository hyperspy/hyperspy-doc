

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>hyperspy.io_plugins.bruker module &mdash; HyperSpy 1.6.1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/hyperspy.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/toggleprompt.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="hyperspy.io_plugins.dens module" href="hyperspy.io_plugins.dens.html" />
    <link rel="prev" title="hyperspy.io_plugins.blockfile module" href="hyperspy.io_plugins.blockfile.html" />
 
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-25260850-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> HyperSpy
          

          
            
            <img src="../_static/hyperspy_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.6.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../user_guide/index.html">HyperSpy User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/index.html">Developer Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Full HyperSpy API Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="hyperspy.html">hyperspy package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="hyperspy.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="hyperspy._components.html">hyperspy._components package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy._signals.html">hyperspy._signals package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.datasets.html">hyperspy.datasets package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.docstrings.html">hyperspy.docstrings package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.drawing.html">hyperspy.drawing package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="hyperspy.io_plugins.html">hyperspy.io_plugins package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.learn.html">hyperspy.learn package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.misc.html">hyperspy.misc package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.models.html">hyperspy.models package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.samfire_utils.html">hyperspy.samfire_utils package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.utils.html">hyperspy.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="hyperspy.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="hyperspy.html#module-hyperspy">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../citing.html">Citing HyperSpy</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">HyperSpy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">hyperspy</a> &raquo;</li>
        
          <li><a href="hyperspy.html">hyperspy package</a> &raquo;</li>
        
          <li><a href="hyperspy.io_plugins.html">hyperspy.io_plugins package</a> &raquo;</li>
        
      <li>hyperspy.io_plugins.bruker module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/hyperspy.io_plugins.bruker.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-hyperspy.io_plugins.bruker">
<span id="hyperspy-io-plugins-bruker-module"></span><h1>hyperspy.io_plugins.bruker module<a class="headerlink" href="#module-hyperspy.io_plugins.bruker" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="hyperspy.io_plugins.bruker.BCF_reader">
<em class="property">class </em><code class="sig-prename descclassname">hyperspy.io_plugins.bruker.</code><code class="sig-name descname">BCF_reader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">instrument</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.BCF_reader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#hyperspy.io_plugins.bruker.SFS_reader" title="hyperspy.io_plugins.bruker.SFS_reader"><code class="xref py py-class docutils literal notranslate"><span class="pre">hyperspy.io_plugins.bruker.SFS_reader</span></code></a></p>
<p>Class to read bcf (Bruker hypermapping) file.</p>
<p>Inherits SFS_reader and all its attributes and methods.</p>
<p>Attributes:
filename</p>
<p>Methods:
check_index_valid, parse_hypermap</p>
<p>The class instantiates HyperHeader class as self.header attribute
where all metadata, sum eds spectras, (SEM) images are stored.</p>
<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.BCF_reader.add_filename_to_general">
<code class="sig-name descname">add_filename_to_general</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.BCF_reader.add_filename_to_general" title="Permalink to this definition">¶</a></dt>
<dd><p>hypy helper method</p>
</dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.BCF_reader.check_index_valid">
<code class="sig-name descname">check_index_valid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">index</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.BCF_reader.check_index_valid" title="Permalink to this definition">¶</a></dt>
<dd><p>check and return if index is valid</p>
</dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.BCF_reader.parse_hypermap">
<code class="sig-name descname">parse_hypermap</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">index</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">downsample</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">cutoff_at_kV</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">lazy</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.BCF_reader.parse_hypermap" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpack the Delphi/Bruker binary spectral map and return
numpy array in memory efficient way.</p>
<p>Pure python/numpy implementation – slow, or
cython/memoryview/numpy implimentation if compilied and present
(fast) is used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – The index of hypermap in bcf if there is more than one
hyper map in file.</p></li>
<li><p><strong>downsample</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – Downsampling factor. Differently than block_reduce from
skimage.measure, the parser populates reduced array by suming
results of pixels, thus having lower memory requiriments. Default
is 1.</p></li>
<li><p><strong>cutoff_at_kV</strong> (<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Value in keV to truncate the array at. Helps reducing size of
array. Default is None.</p></li>
<li><p><strong>lazy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) – It True, returns dask.array otherwise a numpy.array. Default is
False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>result</strong> – Bruker hypermap, with (y,x,E) shape.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.19)">numpy.ndarray</a> or dask.array.array</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="hyperspy.io_plugins.bruker.Container">
<em class="property">class </em><code class="sig-prename descclassname">hyperspy.io_plugins.bruker.</code><code class="sig-name descname">Container</code><a class="headerlink" href="#hyperspy.io_plugins.bruker.Container" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt id="hyperspy.io_plugins.bruker.EDXSpectrum">
<em class="property">class </em><code class="sig-prename descclassname">hyperspy.io_plugins.bruker.</code><code class="sig-name descname">EDXSpectrum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">spectrum</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.EDXSpectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Wrap the objectified bruker EDS spectrum xml part
to the python object, leaving all the xml and bruker clutter behind.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>spectrum</strong> (<em>etree xml object</em>) – etree xml object, where spectrum.attrib[‘Type’] should
be ‘TRTSpectrum’.</p>
</dd>
</dl>
<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.EDXSpectrum.energy_to_channel">
<code class="sig-name descname">energy_to_channel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">energy</span></em>, <em class="sig-param"><span class="n">kV</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.EDXSpectrum.energy_to_channel" title="Permalink to this definition">¶</a></dt>
<dd><p>convert energy to channel index,
optional kwarg ‘kV’ (default: True) should be set to False
if given energy units is in V</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="hyperspy.io_plugins.bruker.HyperHeader">
<em class="property">class </em><code class="sig-prename descclassname">hyperspy.io_plugins.bruker.</code><code class="sig-name descname">HyperHeader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xml_str</span></em>, <em class="sig-param"><span class="n">indexes</span></em>, <em class="sig-param"><span class="n">instrument</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Wrap Bruker HyperMaping xml header into python object.</p>
<p>Arguments:
xml_str – the uncompressed to be provided with extracted Header xml
from bcf.
indexes – list of indexes of available datasets</p>
<p>Methods:
estimate_map_channels, estimate_map_depth</p>
<p>If Bcf is version 2, the bcf can contain stacks
of hypermaps - thus header part  can contain multiply sum eds spectras
and it’s metadata per hypermap slice which can be selected using index.
Bcf can record number of imagery from different
imagining detectors (BSE, SEI, ARGUS, etc…): access to imagery
is throught image index.</p>
<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.HyperHeader._parse_image">
<code class="sig-name descname">_parse_image</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xml_node</span></em>, <em class="sig-param"><span class="n">overview</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader._parse_image" title="Permalink to this definition">¶</a></dt>
<dd><p>parse image from bruker xml image node.</p>
</dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.HyperHeader._set_elements">
<code class="sig-name descname">_set_elements</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">root</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader._set_elements" title="Permalink to this definition">¶</a></dt>
<dd><p>wrap objectified xml part with selection of elements to
self.elements list</p>
</dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.HyperHeader._set_images">
<code class="sig-name descname">_set_images</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">root</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader._set_images" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrap objectified xml part with image to class attributes
for self.image.</p>
</dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.HyperHeader._set_microscope">
<code class="sig-name descname">_set_microscope</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">root</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader._set_microscope" title="Permalink to this definition">¶</a></dt>
<dd><p>set microscope metadata from objectified xml part (TRTSEMData,
TRTSEMStageData, TRTDSPConfiguration).</p>
<p>BCF can contain basic parameters of SEM column, and optionaly
the stage. This metadata can be not fully or at all availbale to
Esprit and saved into bcf file as it depends from license and
the link and implementation state between the microscope’s
software and Bruker system.</p>
</dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.HyperHeader._set_mode">
<code class="sig-name descname">_set_mode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">instrument</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader._set_mode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.HyperHeader._set_sum_edx">
<code class="sig-name descname">_set_sum_edx</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">root</span></em>, <em class="sig-param"><span class="n">indexes</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader._set_sum_edx" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.HyperHeader.calc_real_time">
<code class="sig-name descname">calc_real_time</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader.calc_real_time" title="Permalink to this definition">¶</a></dt>
<dd><p>calculate and return real time for whole hypermap
in seconds</p>
</dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.HyperHeader.estimate_map_channels">
<code class="sig-name descname">estimate_map_channels</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">index</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader.estimate_map_channels" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate minimal size of energy axis so any spectra from any pixel
would not be truncated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – Index of the map if multiply hypermaps are present in the same bcf.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>optimal channel number</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.HyperHeader.estimate_map_depth">
<code class="sig-name descname">estimate_map_depth</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">index</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">downsample</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">for_numpy</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader.estimate_map_depth" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate minimal dtype of array using cumulative spectra
of the all pixels so that no data would be truncated.</p>
<p>The method estimates the value from sum eds spectra, dividing
the maximum  energy pulse value from raster x and y and to be on the
safe side multiplying by 2.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – Index of the hypermap if multiply hypermaps are present in the
same bcf. (default 0)</p></li>
<li><p><strong>downsample</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – Downsample factor. (default 1)</p></li>
<li><p><strong>for_numpy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) – If False produce unsigned, otherwise signed types: if hypermap
will be loaded using the pure python function where numpy’s inplace
integer addition will be used, the dtype should be signed;
If cython implementation will be used (default), then any returned
dtypes can be safely unsigned. (default False)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>depth</strong> – numpy dtype large enought to use in final hypermap numpy array.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.19)">numpy.dtype</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.HyperHeader.gen_hspy_item_dict_basic">
<code class="sig-name descname">gen_hspy_item_dict_basic</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader.gen_hspy_item_dict_basic" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.HyperHeader.get_acq_instrument_dict">
<code class="sig-name descname">get_acq_instrument_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">detector</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader.get_acq_instrument_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>return python dictionary with aquisition instrument
mandatory data</p>
</dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.HyperHeader.get_spectra_metadata">
<code class="sig-name descname">get_spectra_metadata</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">index</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader.get_spectra_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>return objectified xml with spectra metadata
Arguments:
index – index of hypermap/spectra (default 0)</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="hyperspy.io_plugins.bruker.SFSTreeItem">
<em class="property">class </em><code class="sig-prename descclassname">hyperspy.io_plugins.bruker.</code><code class="sig-name descname">SFSTreeItem</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item_raw_string</span></em>, <em class="sig-param"><span class="n">parent</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFSTreeItem" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Class to manage one internal sfs file.</p>
<p>Reading, reading in chunks, reading and extracting, reading without
extracting even if compression is pressent.</p>
<p>Attributes:
item_raw_string – the bytes from sfs file table describing the file
parent – the item higher hierarchicaly in the sfs file tree</p>
<p>Methods:
read_piece, setup_compression_metadata, get_iter_and_properties,
get_as_BytesIO_string</p>
<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.SFSTreeItem._calc_pointer_table_size">
<code class="sig-name descname">_calc_pointer_table_size</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFSTreeItem._calc_pointer_table_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.SFSTreeItem._filetime_to_unix">
<code class="sig-name descname">_filetime_to_unix</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">time</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFSTreeItem._filetime_to_unix" title="Permalink to this definition">¶</a></dt>
<dd><p>Return recalculated windows filetime to unix time.</p>
</dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.SFSTreeItem._fill_pointer_table">
<code class="sig-name descname">_fill_pointer_table</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFSTreeItem._fill_pointer_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the sfs and populate self.pointers table.</p>
<p>self.pointer is the sfs pointer table containing addresses of
every chunk of the file.</p>
<p>The pointer table if the file is big can extend throught many
sfs chunks. Differently than files, the pointer table of file have no
table of pointers to the chunks. Instead if pointer table is larger
than sfs chunk, the chunk header contains next chunk number (address
can be calculated using known chunk size and global offset) with
continuation of file pointer table, thus it have to be read and filled
consecutive.</p>
</dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.SFSTreeItem._iter_read_chunks">
<code class="sig-name descname">_iter_read_chunks</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">first</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFSTreeItem._iter_read_chunks" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate and return iterator for reading and returning
sfs internal file in chunks.</p>
<p>By default it creates iterator for whole file, however
with kwargs ‘first’ and ‘chunks’ the range of chunks
for iterator can be set.</p>
<p>Keyword arguments:
first – the index of first chunk from which to read. (default 0)
chunks – the number of chunks to read. (default False)</p>
</dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.SFSTreeItem._iter_read_compr_chunks">
<code class="sig-name descname">_iter_read_compr_chunks</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFSTreeItem._iter_read_compr_chunks" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate and return reader and decompressor iterator
for compressed with zlib compression sfs internal file.</p>
<p>Returns:
iterator of decompressed data chunks.</p>
</dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.SFSTreeItem.get_as_BytesIO_string">
<code class="sig-name descname">get_as_BytesIO_string</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFSTreeItem.get_as_BytesIO_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the whole file as io.BytesIO object (in memory!).</p>
</dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.SFSTreeItem.get_iter_and_properties">
<code class="sig-name descname">get_iter_and_properties</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFSTreeItem.get_iter_and_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate and return the iterator of data chunks and
properties of such chunks such as size and count.</p>
<p>Method detects if data is compressed and uses iterator with
decompression involved, else uses simple iterator of chunks.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(iterator, chunk_size, number_of_chunks)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.SFSTreeItem.read_piece">
<code class="sig-name descname">read_piece</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">offset</span></em>, <em class="sig-param"><span class="n">length</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFSTreeItem.read_piece" title="Permalink to this definition">¶</a></dt>
<dd><p>Read and returns raw byte string of the file without applying
any decompression.</p>
<p>Arguments:
offset: seek value
length: length of the data counting from the offset</p>
<p>Returns:
io.ByteIO object</p>
</dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.SFSTreeItem.setup_compression_metadata">
<code class="sig-name descname">setup_compression_metadata</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFSTreeItem.setup_compression_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>parse and setup the number of compression chunks</p>
<p>and uncompressed chunk size as class attributes.</p>
<p>Sets up attributes:
self.uncompressed_blk_size, self.no_of_compr_blk</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="hyperspy.io_plugins.bruker.SFS_reader">
<em class="property">class </em><code class="sig-prename descclassname">hyperspy.io_plugins.bruker.</code><code class="sig-name descname">SFS_reader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFS_reader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Class to read sfs file.
SFS is AidAim software’s(tm) single file system.
The class provides basic reading capabilities of such container.
It is capable to read compressed data in zlib, but
SFS can contain other compression which is not implemented here.
It is also not able to read encrypted sfs containers.</p>
<p>This class can be used stand alone or inherited in construction of
file readers using sfs technolgy.</p>
<dl class="py attribute">
<dt id="hyperspy.io_plugins.bruker.SFS_reader.filename">
<code class="sig-name descname">filename</code><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFS_reader.filename" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.SFS_reader.get_file">
<code class="sig-name descname">get_file</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFS_reader.get_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.SFS_reader._check_the_compresion">
<code class="sig-name descname">_check_the_compresion</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">temp_item_list</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFS_reader._check_the_compresion" title="Permalink to this definition">¶</a></dt>
<dd><p>parse, check and setup the self.compression</p>
</dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.SFS_reader._flat_items_to_dict">
<code class="sig-name descname">_flat_items_to_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">paths</span></em>, <em class="sig-param"><span class="n">temp_item_list</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFS_reader._flat_items_to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>place items from flat list into dictionary tree
of virtual file system</p>
</dd></dl>

<dl class="py method">
<dt id="hyperspy.io_plugins.bruker.SFS_reader._setup_vfs">
<code class="sig-name descname">_setup_vfs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFS_reader._setup_vfs" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup the virtual file system tree represented as python dictionary
with values populated with SFSTreeItem instances</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#hyperspy.io_plugins.bruker.SFSTreeItem" title="hyperspy.io_plugins.bruker.SFSTreeItem"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SFSTreeItem</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="id0">
<code class="sig-name descname">get_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id0" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the SFSTreeItem (aka internal file) object from
sfs container.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Internal file path in sfs file tree. Path accepts only
standard - forward slash for directories.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>object</strong> – SFSTreeItem, which can be read into byte stream, in chunks or
whole using objects methods.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#hyperspy.io_plugins.bruker.SFSTreeItem" title="hyperspy.io_plugins.bruker.SFSTreeItem">SFSTreeItem</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>to get “file” object ‘kitten.png’ in folder ‘catz’ which
resides in root directory of sfs, you would use:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">instance_of_SFSReader</span><span class="o">.</span><span class="n">get_file</span><span class="p">(</span><span class="s1">&#39;catz/kitten.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#hyperspy.io_plugins.bruker.SFSTreeItem" title="hyperspy.io_plugins.bruker.SFSTreeItem"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SFSTreeItem</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="hyperspy.io_plugins.bruker.bcf_hyperspectra">
<code class="sig-prename descclassname">hyperspy.io_plugins.bruker.</code><code class="sig-name descname">bcf_hyperspectra</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj_bcf</span></em>, <em class="sig-param"><span class="n">index</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">downsample</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cutoff_at_kV</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">lazy</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.bcf_hyperspectra" title="Permalink to this definition">¶</a></dt>
<dd><p>Return hyperspy required list of dict with eds
hyperspectra and metadata.</p>
</dd></dl>

<dl class="py function">
<dt id="hyperspy.io_plugins.bruker.bcf_images">
<code class="sig-prename descclassname">hyperspy.io_plugins.bruker.</code><code class="sig-name descname">bcf_images</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj_bcf</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.bcf_images" title="Permalink to this definition">¶</a></dt>
<dd><p>return hyperspy required list of dict with sem
images and metadata.</p>
</dd></dl>

<dl class="py function">
<dt id="hyperspy.io_plugins.bruker.bcf_reader">
<code class="sig-prename descclassname">hyperspy.io_plugins.bruker.</code><code class="sig-name descname">bcf_reader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">select_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">index</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">downsample</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">cutoff_at_kV</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">instrument</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">lazy</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.bcf_reader" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a bruker bcf file and loads the data into the appropriate class,
then wraps it into appropriate hyperspy required list of dictionaries
used by hyperspy.api.load() method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>select_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a>) – One of: spectrum_image, image. If none specified, then function
loads everything, else if specified, loads either just sem imagery,
or just hyper spectral mapping data (default None).</p></li>
<li><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Index of dataset in bcf v2 can be None integer and ‘all’
(default None); None will select first available mapping if more than
one. ‘all’ will return all maps if more than one present;
integer will return only selected map.</p></li>
<li><p><strong>downsample</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – the downsample ratio of hyperspectral array (downsampling
height and width only), can be integer from 1 to inf, where ‘1’ means
no downsampling will be applied. (default 1)</p></li>
<li><p><strong>cutoff_at_kV</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a>) – if set (can be int of float &gt;= 0) can be used either, to
crop or enlarge energy range at max values. (default None)</p></li>
<li><p><strong>instrument</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><em>None</em></a>) – Can be either ‘TEM’ or ‘SEM’. Default is None.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hyperspy.io_plugins.bruker.dictionarize">
<code class="sig-prename descclassname">hyperspy.io_plugins.bruker.</code><code class="sig-name descname">dictionarize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.dictionarize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="hyperspy.io_plugins.bruker.file_reader">
<code class="sig-prename descclassname">hyperspy.io_plugins.bruker.</code><code class="sig-name descname">file_reader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.file_reader" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="hyperspy.io_plugins.bruker.gen_detector_node">
<code class="sig-prename descclassname">hyperspy.io_plugins.bruker.</code><code class="sig-name descname">gen_detector_node</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">spectrum</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.gen_detector_node" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="hyperspy.io_plugins.bruker.gen_elem_list">
<code class="sig-prename descclassname">hyperspy.io_plugins.bruker.</code><code class="sig-name descname">gen_elem_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">the_dict</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.gen_elem_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="hyperspy.io_plugins.bruker.gen_iso_date_time">
<code class="sig-prename descclassname">hyperspy.io_plugins.bruker.</code><code class="sig-name descname">gen_iso_date_time</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">node</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.gen_iso_date_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="hyperspy.io_plugins.bruker.get_mapping">
<code class="sig-prename descclassname">hyperspy.io_plugins.bruker.</code><code class="sig-name descname">get_mapping</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.get_mapping" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="hyperspy.io_plugins.bruker.guess_mode">
<code class="sig-prename descclassname">hyperspy.io_plugins.bruker.</code><code class="sig-name descname">guess_mode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">hv</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.guess_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>there is no way to determine what kind of instrument
was used from metadata: TEM or SEM.
However simple guess can be made using the acceleration
voltage, assuming that SEM is &lt;= 30kV or TEM is &gt;30kV</p>
</dd></dl>

<dl class="py function">
<dt id="hyperspy.io_plugins.bruker.interpret">
<code class="sig-prename descclassname">hyperspy.io_plugins.bruker.</code><code class="sig-name descname">interpret</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">string</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.interpret" title="Permalink to this definition">¶</a></dt>
<dd><p>interpret any string and return casted to appropriate
dtype python object</p>
</dd></dl>

<dl class="py function">
<dt id="hyperspy.io_plugins.bruker.parse_line">
<code class="sig-prename descclassname">hyperspy.io_plugins.bruker.</code><code class="sig-name descname">parse_line</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">line_string</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.parse_line" title="Permalink to this definition">¶</a></dt>
<dd><p>standardize line describtion.</p>
<p>Bruker saves line description in all caps
and omits the type if only one exists instead of
using alfa</p>
</dd></dl>

<dl class="py function">
<dt id="hyperspy.io_plugins.bruker.py_parse_hypermap">
<code class="sig-prename descclassname">hyperspy.io_plugins.bruker.</code><code class="sig-name descname">py_parse_hypermap</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">virtual_file</span></em>, <em class="sig-param"><span class="n">shape</span></em>, <em class="sig-param"><span class="n">dtype</span></em>, <em class="sig-param"><span class="n">downsample</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.py_parse_hypermap" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpack the Delphi/Bruker binary spectral map and return
numpy array in memory efficient way using pure python implementation.
(Slow!)</p>
<p>The function is long and complicated due to complexity of Delphi packed
array.
Whole parsing is placed in one function to reduce overhead of
python function calls. For cleaner parsing logic, please, see
fast cython implementation at hyperspy/io_plugins/unbcf_fast.pyx</p>
<p>The method is only meant to be used if for some
reason c (generated with cython) version of the parser is not compiled.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>-- virtual file handle returned by SFS_reader instance</strong> (<em>virtual_file</em>) – or by object inheriting it (e.g. BCF_reader instance)</p></li>
<li><p><strong>-- numpy shape</strong> (<em>shape</em>) – </p></li>
<li><p><strong>-- numpy dtype</strong> (<em>dtype</em>) – </p></li>
<li><p><strong>-- downsample factor</strong> (<em>downsample</em>) – </p></li>
<li><p><strong>note!</strong> (<em>downsample</em><em>, </em><em>shape and dtype are interconnected and needs</em>) – </p></li>
<li><p><strong>be properly calculated otherwise wrong output</strong><strong> or </strong><strong>segfault</strong> (<em>to</em>) – </p></li>
<li><p><strong>expected</strong> (<em>is</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy array of bruker hypermap, with (y, x, E) shape.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hyperspy.io_plugins.bruker.spx_reader">
<code class="sig-prename descclassname">hyperspy.io_plugins.bruker.</code><code class="sig-name descname">spx_reader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">lazy</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.spx_reader" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="hyperspy.io_plugins.dens.html" class="btn btn-neutral float-right" title="hyperspy.io_plugins.dens module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hyperspy.io_plugins.blockfile.html" class="btn btn-neutral float-left" title="hyperspy.io_plugins.blockfile module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2011-2020, The HyperSpy development team

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>