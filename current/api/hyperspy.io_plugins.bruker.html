<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>hyperspy.io_plugins.bruker module &mdash; HyperSpy 1.7.6 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/hyperspy.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/toggleprompt.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="hyperspy.io_plugins.dens module" href="hyperspy.io_plugins.dens.html" />
    <link rel="prev" title="hyperspy.io_plugins.blockfile module" href="hyperspy.io_plugins.blockfile.html" />
 
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-25260850-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            HyperSpy
              <img src="../_static/hyperspy_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.7.6
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/changes.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/install.html">Installing HyperSpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/signal.html">The Signal class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/axes.html">Axes handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/interactive_operations_ROIs.html">Interactive Operations and Region of Interest (ROI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/signal1d.html">Signal1D Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/signal2d.html">Signal2D Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/visualisation.html">Data visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/mva.html">Machine learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/model.html">Model fitting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/eels.html">Electron Energy Loss Spectroscopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/eds.html">Energy-Dispersive X-ray Spectrometry (EDS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/dielectric_function.html">Dielectric function tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/electron_holography.html">Electron Holography</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/io.html">Loading and saving data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/events.html">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/big_data.html">Working with big data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/metadata_structure.html">Metadata structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/bibliography.html">Bibliography</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/git.html">Using Git and GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/testing.html">Running and writing tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/writing_docs.html">Writing documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/coding_style.html">Coding style</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/lazy_computations.html">Tips for writing methods that work on lazy signals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/speeding_up_code.html">Speeding up code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/writing_extensions.html">Writing packages that extend HyperSpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/useful_information.html">Useful information</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API References</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">hyperspy</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="hyperspy.html">hyperspy package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="hyperspy.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="hyperspy._components.html">hyperspy._components package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy._signals.html">hyperspy._signals package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.datasets.html">hyperspy.datasets package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.docstrings.html">hyperspy.docstrings package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.drawing.html">hyperspy.drawing package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="hyperspy.io_plugins.html">hyperspy.io_plugins package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.learn.html">hyperspy.learn package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.misc.html">hyperspy.misc package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.models.html">hyperspy.models package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.samfire_utils.html">hyperspy.samfire_utils package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.utils.html">hyperspy.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="hyperspy.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="hyperspy.html#module-hyperspy">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Credits and citation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../citing.html">Citing HyperSpy</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">HyperSpy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">hyperspy</a></li>
          <li class="breadcrumb-item"><a href="hyperspy.html">hyperspy package</a></li>
          <li class="breadcrumb-item"><a href="hyperspy.io_plugins.html">hyperspy.io_plugins package</a></li>
      <li class="breadcrumb-item active">hyperspy.io_plugins.bruker module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api/hyperspy.io_plugins.bruker.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-hyperspy.io_plugins.bruker">
<span id="hyperspy-io-plugins-bruker-module"></span><h1>hyperspy.io_plugins.bruker module<a class="headerlink" href="#module-hyperspy.io_plugins.bruker" title="Permalink to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.BCF_reader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">hyperspy.io_plugins.bruker.</span></span><span class="sig-name descname"><span class="pre">BCF_reader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instrument</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.BCF_reader" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#hyperspy.io_plugins.bruker.SFS_reader" title="hyperspy.io_plugins.bruker.SFS_reader"><code class="xref py py-class docutils literal notranslate"><span class="pre">SFS_reader</span></code></a></p>
<p>Class to read bcf (Bruker hypermapping) file.</p>
<p>Inherits SFS_reader and all its attributes and methods.</p>
<p>Attributes:
filename</p>
<p>Methods:
check_index_valid, parse_hypermap</p>
<p>The class instantiates HyperHeader class as self.header attribute
where all metadata, sum eds spectras, (SEM) images are stored.</p>
<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.BCF_reader.add_filename_to_general">
<span class="sig-name descname"><span class="pre">add_filename_to_general</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.BCF_reader.add_filename_to_general" title="Permalink to this definition"></a></dt>
<dd><p>hypy helper method</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.BCF_reader.check_index_valid">
<span class="sig-name descname"><span class="pre">check_index_valid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.BCF_reader.check_index_valid" title="Permalink to this definition"></a></dt>
<dd><p>check and return if index is valid</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.BCF_reader.parse_hypermap">
<span class="sig-name descname"><span class="pre">parse_hypermap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">downsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff_at_kV</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lazy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.BCF_reader.parse_hypermap" title="Permalink to this definition"></a></dt>
<dd><p>Unpack the Delphi/Bruker binary spectral map and return
numpy array in memory efficient way.</p>
<p>Pure python/numpy implementation – slow, or
cython/memoryview/numpy implimentation if compilied and present
(fast) is used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> (<em>None</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>) – The index of hypermap in bcf if there is more than one
hyper map in file.</p></li>
<li><p><strong>downsample</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>) – Downsampling factor. Differently than block_reduce from
skimage.measure, the parser populates reduced array by suming
results of pixels, thus having lower memory requiriments. Default
is 1.</p></li>
<li><p><strong>cutoff_at_kV</strong> (<em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – <p>Value or method to truncate the array at energy in kV. Helps reducing size of the returned
array. Default value is None (does not truncate). Numerical value should be in kV.
Two methods for automatic cutoff is available:</p>
<blockquote>
<div><p>”zealous” - truncates to the last non zero channel (should not be used for stacks).
“auto” - truncates to hv of electron microscope (good for stacks if hv is consistent).</p>
</div></blockquote>
</p></li>
<li><p><strong>lazy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a>) – It True, returns dask.array otherwise a numpy.array. Default is
False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>result</strong> – Bruker hypermap, with (y,x,E) shape.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)">numpy.ndarray</a> or dask.array.array</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.HyperHeader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">hyperspy.io_plugins.bruker.</span></span><span class="sig-name descname"><span class="pre">HyperHeader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xml_str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indexes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instrument</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Wrap Bruker HyperMaping xml header into python object.</p>
<p>Arguments:
xml_str – the uncompressed to be provided with extracted Header xml
from bcf.
indexes – list of indexes of available datasets</p>
<p>Methods:
estimate_map_channels, estimate_map_depth</p>
<p>If Bcf is version 2, the bcf can contain stacks
of hypermaps - thus header part  can contain multiply sum eds spectras
and it’s metadata per hypermap slice which can be selected using index.
Bcf can record number of images from different single dimentional value
detectors (BSE, SEI, ARGUS, etc…). images representing signals are
internaly ordered and right signal image can be accessed using image
index (do not confuse with dataset index).</p>
<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.HyperHeader._parse_image">
<span class="sig-name descname"><span class="pre">_parse_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xml_node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overview</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader._parse_image" title="Permalink to this definition"></a></dt>
<dd><p>parse image from bruker xml image node.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.HyperHeader._set_elements">
<span class="sig-name descname"><span class="pre">_set_elements</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader._set_elements" title="Permalink to this definition"></a></dt>
<dd><p>wrap objectified xml part with selection of elements to
self.elements list</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.HyperHeader._set_images">
<span class="sig-name descname"><span class="pre">_set_images</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader._set_images" title="Permalink to this definition"></a></dt>
<dd><p>Wrap objectified xml part with image to class attributes
for self.image.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.HyperHeader._set_microscope">
<span class="sig-name descname"><span class="pre">_set_microscope</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader._set_microscope" title="Permalink to this definition"></a></dt>
<dd><p>set microscope metadata from objectified xml part (TRTSEMData,
TRTSEMStageData, TRTDSPConfiguration).</p>
<p>BCF can contain basic parameters of SEM column, and optionaly
the stage. This metadata can be not fully or at all availbale to
Esprit and saved into bcf file as it depends from license and
the link and implementation state between the microscope’s
software and Bruker system.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.HyperHeader.calc_real_time">
<span class="sig-name descname"><span class="pre">calc_real_time</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader.calc_real_time" title="Permalink to this definition"></a></dt>
<dd><p>calculate and return real time for whole hypermap
in seconds</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.HyperHeader.estimate_map_depth">
<span class="sig-name descname"><span class="pre">estimate_map_depth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">downsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">for_numpy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader.estimate_map_depth" title="Permalink to this definition"></a></dt>
<dd><p>Estimate minimal dtype of array using cumulative spectra
of the all pixels so that no data would be truncated.</p>
<p>The method estimates the value from sum eds spectra, dividing
the maximum  energy pulse value from raster x and y and to be on the
safe side multiplying by 2.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>) – Index of the hypermap if multiply hypermaps are present in the
same bcf. (default 0)</p></li>
<li><p><strong>downsample</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>) – Downsample factor. (default 1)</p></li>
<li><p><strong>for_numpy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a>) – If False produce unsigned, otherwise signed types: if hypermap
will be loaded using the pure python function where numpy’s inplace
integer addition will be used, the dtype should be signed;
If cython implementation will be used (default), then any returned
dtypes can be safely unsigned. (default False)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>depth</strong> – numpy dtype large enought to use in final hypermap numpy array.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.26)">numpy.dtype</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.HyperHeader.get_acq_instrument_dict">
<span class="sig-name descname"><span class="pre">get_acq_instrument_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">detector</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader.get_acq_instrument_dict" title="Permalink to this definition"></a></dt>
<dd><p>return python dictionary with aquisition instrument
mandatory data</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.HyperHeader.get_consistent_min_channels">
<span class="sig-name descname"><span class="pre">get_consistent_min_channels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader.get_consistent_min_channels" title="Permalink to this definition"></a></dt>
<dd><p>Estimate consistent minimal size of energy axis by comparing energy
at last recorded channel vs electron beam potential and return channel
number corresponding to least energy. This method is safe to use with
sliced datasets (consistent between slices) which were acquired using
the same electron potential.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>) – Index of the map if multiple hypermaps are present in the same bcf.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>optimal channel number</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.HyperHeader.get_spectra_metadata">
<span class="sig-name descname"><span class="pre">get_spectra_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.HyperHeader.get_spectra_metadata" title="Permalink to this definition"></a></dt>
<dd><p>return objectified xml with spectra metadata
Arguments:
index – index of hypermap/spectra (default 0)</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.SFSTreeItem">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">hyperspy.io_plugins.bruker.</span></span><span class="sig-name descname"><span class="pre">SFSTreeItem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item_raw_string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFSTreeItem" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Class to manage one internal sfs file.</p>
<p>Reading, reading in chunks, reading and extracting, reading without
extracting even if compression is pressent.</p>
<p>Attributes:
item_raw_string – the bytes from sfs file table describing the file
parent – the item higher hierarchicaly in the sfs file tree</p>
<p>Methods:
read_piece, setup_compression_metadata, get_iter_and_properties,
get_as_BytesIO_string</p>
<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.SFSTreeItem._filetime_to_unix">
<span class="sig-name descname"><span class="pre">_filetime_to_unix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFSTreeItem._filetime_to_unix" title="Permalink to this definition"></a></dt>
<dd><p>Return recalculated windows filetime to unix time.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.SFSTreeItem._fill_pointer_table">
<span class="sig-name descname"><span class="pre">_fill_pointer_table</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFSTreeItem._fill_pointer_table" title="Permalink to this definition"></a></dt>
<dd><p>Parse the sfs and populate self.pointers table.</p>
<p>self.pointer is the sfs pointer table containing addresses of
every chunk of the file.</p>
<p>The pointer table if the file is big can extend throught many
sfs chunks. Differently than files, the pointer table of file have no
table of pointers to the chunks. Instead if pointer table is larger
than sfs chunk, the chunk header contains next chunk number (address
can be calculated using known chunk size and global offset) with
continuation of file pointer table, thus it have to be read and filled
consecutive.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.SFSTreeItem._iter_read_chunks">
<span class="sig-name descname"><span class="pre">_iter_read_chunks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">first</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFSTreeItem._iter_read_chunks" title="Permalink to this definition"></a></dt>
<dd><p>Generate and return iterator for reading and returning
sfs internal file in chunks.</p>
<p>By default it creates iterator for whole file, however
with kwargs ‘first’ and ‘chunks’ the range of chunks
for iterator can be set.</p>
<p>Keyword arguments:
first – the index of first chunk from which to read. (default 0)
chunks – the number of chunks to read. (default False)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.SFSTreeItem._iter_read_compr_chunks">
<span class="sig-name descname"><span class="pre">_iter_read_compr_chunks</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFSTreeItem._iter_read_compr_chunks" title="Permalink to this definition"></a></dt>
<dd><p>Generate and return reader and decompressor iterator
for compressed with zlib compression sfs internal file.</p>
<p>Returns:
iterator of decompressed data chunks.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.SFSTreeItem.get_as_BytesIO_string">
<span class="sig-name descname"><span class="pre">get_as_BytesIO_string</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFSTreeItem.get_as_BytesIO_string" title="Permalink to this definition"></a></dt>
<dd><p>Get the whole file as io.BytesIO object (in memory!).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.SFSTreeItem.get_iter_and_properties">
<span class="sig-name descname"><span class="pre">get_iter_and_properties</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFSTreeItem.get_iter_and_properties" title="Permalink to this definition"></a></dt>
<dd><p>Generate and return the iterator of data chunks and
properties of such chunks such as size and count.</p>
<p>Method detects if data is compressed and uses iterator with
decompression involved, else uses simple iterator of chunks.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>(iterator, chunk_size, number_of_chunks)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.SFSTreeItem.read_piece">
<span class="sig-name descname"><span class="pre">read_piece</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">offset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFSTreeItem.read_piece" title="Permalink to this definition"></a></dt>
<dd><p>Read and returns raw byte string of the file without applying
any decompression.</p>
<p>Arguments:
offset: seek value
length: length of the data counting from the offset</p>
<p>Returns:
io.ByteIO object</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.SFSTreeItem.setup_compression_metadata">
<span class="sig-name descname"><span class="pre">setup_compression_metadata</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFSTreeItem.setup_compression_metadata" title="Permalink to this definition"></a></dt>
<dd><p>parse and setup the number of compression chunks</p>
<p>and uncompressed chunk size as class attributes.</p>
<p>Sets up attributes:
self.uncompressed_blk_size, self.no_of_compr_blk</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.SFS_reader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">hyperspy.io_plugins.bruker.</span></span><span class="sig-name descname"><span class="pre">SFS_reader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFS_reader" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Class to read sfs file.
SFS is AidAim software’s(tm) single file system.
The class provides basic reading capabilities of such container.
It is capable to read compressed data in zlib, but
SFS can contain other compression which is not implemented here.
It is also not able to read encrypted sfs containers.</p>
<p>This class can be used stand alone or inherited in construction of
file readers using sfs technolgy.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.SFS_reader.filename">
<span class="sig-name descname"><span class="pre">filename</span></span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFS_reader.filename" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.SFS_reader._check_the_compresion">
<span class="sig-name descname"><span class="pre">_check_the_compresion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">temp_item_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFS_reader._check_the_compresion" title="Permalink to this definition"></a></dt>
<dd><p>parse, check and setup the self.compression</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.SFS_reader._flat_items_to_dict">
<span class="sig-name descname"><span class="pre">_flat_items_to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">paths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temp_item_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFS_reader._flat_items_to_dict" title="Permalink to this definition"></a></dt>
<dd><p>place items from flat list into dictionary tree
of virtual file system</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.SFS_reader._setup_vfs">
<span class="sig-name descname"><span class="pre">_setup_vfs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFS_reader._setup_vfs" title="Permalink to this definition"></a></dt>
<dd><p>Setup the virtual file system tree represented as python dictionary
with values populated with SFSTreeItem instances</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#hyperspy.io_plugins.bruker.SFSTreeItem" title="hyperspy.io_plugins.bruker.SFSTreeItem"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SFSTreeItem</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.SFS_reader.get_file">
<span class="sig-name descname"><span class="pre">get_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.SFS_reader.get_file" title="Permalink to this definition"></a></dt>
<dd><p>Return the SFSTreeItem (aka internal file) object from
sfs container.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – Internal file path in sfs file tree. Path accepts only
standard - forward slash for directories.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>object</strong> – SFSTreeItem, which can be read into byte stream, in chunks or
whole using objects methods.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#hyperspy.io_plugins.bruker.SFSTreeItem" title="hyperspy.io_plugins.bruker.SFSTreeItem">SFSTreeItem</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>to get “file” object ‘kitten.png’ in folder ‘catz’ which
resides in root directory of sfs, you would use:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">instance_of_SFSReader</span><span class="o">.</span><span class="n">get_file</span><span class="p">(</span><span class="s1">&#39;catz/kitten.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#hyperspy.io_plugins.bruker.SFSTreeItem" title="hyperspy.io_plugins.bruker.SFSTreeItem"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SFSTreeItem</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.bcf_hyperspectra">
<span class="sig-prename descclassname"><span class="pre">hyperspy.io_plugins.bruker.</span></span><span class="sig-name descname"><span class="pre">bcf_hyperspectra</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj_bcf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">downsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff_at_kV</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lazy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.bcf_hyperspectra" title="Permalink to this definition"></a></dt>
<dd><p>Return hyperspy required list of dict with eds
hyperspectra and metadata.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.bcf_images">
<span class="sig-prename descclassname"><span class="pre">hyperspy.io_plugins.bruker.</span></span><span class="sig-name descname"><span class="pre">bcf_images</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj_bcf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.bcf_images" title="Permalink to this definition"></a></dt>
<dd><p>return hyperspy required list of dict with sem
images and metadata.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.bcf_reader">
<span class="sig-prename descclassname"><span class="pre">hyperspy.io_plugins.bruker.</span></span><span class="sig-name descname"><span class="pre">bcf_reader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">select_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">downsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff_at_kV</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instrument</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lazy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.bcf_reader" title="Permalink to this definition"></a></dt>
<dd><p>Reads a bruker bcf file and loads the data into the appropriate class,
then wraps it into appropriate hyperspy required list of dictionaries
used by hyperspy.api.load() method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>select_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> or </em><em>None</em>) – One of: spectrum_image, image. If none specified, then function
loads everything, else if specified, loads either just sem imagery,
or just hyper spectral mapping data (default None).</p></li>
<li><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em>, </em><em>None</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – Index of dataset in bcf v2 can be None integer and ‘all’
(default None); None will select first available mapping if more than
one. ‘all’ will return all maps if more than one present;
integer will return only selected map.</p></li>
<li><p><strong>downsample</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>) – the downsample ratio of hyperspectral array (downsampling
height and width only), can be integer from 1 to inf, where ‘1’ means
no downsampling will be applied. (default 1)</p></li>
<li><p><strong>cutoff_at_kV</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><em>float</em></a><em> or </em><em>None</em>) – if set (can be int of float &gt;= 0) can be used either, to
crop or enlarge energy range at max values. (default None)</p></li>
<li><p><strong>instrument</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> or </em><em>None</em>) – Can be either ‘TEM’ or ‘SEM’. Default is None.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.guess_mode">
<span class="sig-prename descclassname"><span class="pre">hyperspy.io_plugins.bruker.</span></span><span class="sig-name descname"><span class="pre">guess_mode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hv</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.guess_mode" title="Permalink to this definition"></a></dt>
<dd><p>there is no way to determine what kind of instrument
was used from metadata: TEM or SEM.
However simple guess can be made using the acceleration
voltage, assuming that SEM is &lt;= 30kV or TEM is &gt;30kV</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.interpret">
<span class="sig-prename descclassname"><span class="pre">hyperspy.io_plugins.bruker.</span></span><span class="sig-name descname"><span class="pre">interpret</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.interpret" title="Permalink to this definition"></a></dt>
<dd><p>interpret any string and return casted to appropriate
dtype python object</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.parse_line">
<span class="sig-prename descclassname"><span class="pre">hyperspy.io_plugins.bruker.</span></span><span class="sig-name descname"><span class="pre">parse_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line_string</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.parse_line" title="Permalink to this definition"></a></dt>
<dd><p>standardize line describtion.</p>
<p>Bruker saves line description in all caps
and omits the type if only one exists instead of
using alfa</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.io_plugins.bruker.py_parse_hypermap">
<span class="sig-prename descclassname"><span class="pre">hyperspy.io_plugins.bruker.</span></span><span class="sig-name descname"><span class="pre">py_parse_hypermap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">virtual_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">downsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.io_plugins.bruker.py_parse_hypermap" title="Permalink to this definition"></a></dt>
<dd><p>Unpack the Delphi/Bruker binary spectral map and return
numpy array in memory efficient way using pure python implementation.
(Slow!)</p>
<p>The function is long and complicated due to complexity of Delphi packed
array.
Whole parsing is placed in one function to reduce overhead of
python function calls. For cleaner parsing logic, please, see
fast cython implementation at hyperspy/io_plugins/unbcf_fast.pyx</p>
<p>The method is only meant to be used if for some
reason c (generated with cython) version of the parser is not compiled.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instance</strong> (<em>virtual_file -- virtual file handle returned by SFS_reader</em>) – or by object inheriting it (e.g. BCF_reader instance)</p></li>
<li><p><strong>shape</strong> (<em>shape -- numpy</em>) – </p></li>
<li><p><strong>dtype</strong> (<em>dtype -- numpy</em>) – </p></li>
<li><p><strong>factor</strong> (<em>downsample -- downsample</em>) – </p></li>
<li><p><strong>note!</strong> (<em>downsample</em><em>, </em><em>shape and dtype are interconnected and needs</em>) – </p></li>
<li><p><strong>segfault</strong> (<em>to be properly calculated otherwise wrong output or</em>) – </p></li>
<li><p><strong>expected</strong> (<em>is</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy array of bruker hypermap, with (y, x, E) shape.</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="hyperspy.io_plugins.blockfile.html" class="btn btn-neutral float-left" title="hyperspy.io_plugins.blockfile module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="hyperspy.io_plugins.dens.html" class="btn btn-neutral float-right" title="hyperspy.io_plugins.dens module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2011-2023, The HyperSpy development team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>