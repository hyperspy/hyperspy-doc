<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>hyperspy.misc.array_tools module &mdash; HyperSpy 1.7.3 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/hyperspy.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/toggleprompt.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="hyperspy.misc.axis_tools module" href="hyperspy.misc.axis_tools.html" />
    <link rel="prev" title="hyperspy.misc.machine_learning.tools module" href="hyperspy.misc.machine_learning.tools.html" />
 
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-25260850-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> HyperSpy
            <img src="../_static/hyperspy_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.7.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/changes.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/install.html">Installing HyperSpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/signal.html">The Signal class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/axes.html">Axes handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/interactive_operations_ROIs.html">Interactive Operations and Region of Interest (ROI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/signal1d.html">Signal1D Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/signal2d.html">Signal2D Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/visualisation.html">Data visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/mva.html">Machine learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/model.html">Model fitting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/eels.html">Electron Energy Loss Spectroscopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/eds.html">Energy-Dispersive X-ray Spectrometry (EDS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/dielectric_function.html">Dielectric function tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/electron_holography.html">Electron Holography</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/io.html">Loading and saving data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/events.html">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/big_data.html">Working with big data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/metadata_structure.html">Metadata structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/bibliography.html">Bibliography</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/git.html">Using Git and GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/testing.html">Running and writing tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/writing_docs.html">Writing documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/coding_style.html">Coding style</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/lazy_computations.html">Tips for writing methods that work on lazy signals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/speeding_up_code.html">Speeding up code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/writing_extensions.html">Writing packages that extend HyperSpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/useful_information.html">Useful information</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API References</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">hyperspy</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="hyperspy.html">hyperspy package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="hyperspy.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="hyperspy._components.html">hyperspy._components package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy._signals.html">hyperspy._signals package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.datasets.html">hyperspy.datasets package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.docstrings.html">hyperspy.docstrings package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.drawing.html">hyperspy.drawing package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.io_plugins.html">hyperspy.io_plugins package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.learn.html">hyperspy.learn package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="hyperspy.misc.html">hyperspy.misc package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.models.html">hyperspy.models package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.samfire_utils.html">hyperspy.samfire_utils package</a></li>
<li class="toctree-l4"><a class="reference internal" href="hyperspy.utils.html">hyperspy.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="hyperspy.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="hyperspy.html#module-hyperspy">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Credits and citation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../citing.html">Citing HyperSpy</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">HyperSpy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="modules.html">hyperspy</a> &raquo;</li>
          <li><a href="hyperspy.html">hyperspy package</a> &raquo;</li>
          <li><a href="hyperspy.misc.html">hyperspy.misc package</a> &raquo;</li>
      <li>hyperspy.misc.array_tools module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api/hyperspy.misc.array_tools.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-hyperspy.misc.array_tools">
<span id="hyperspy-misc-array-tools-module"></span><h1>hyperspy.misc.array_tools module<a class="headerlink" href="#module-hyperspy.misc.array_tools" title="Permalink to this heading"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.misc.array_tools._linear_bin">
<span class="sig-prename descclassname"><span class="pre">hyperspy.misc.array_tools.</span></span><span class="sig-name descname"><span class="pre">_linear_bin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.misc.array_tools._linear_bin" title="Permalink to this definition"></a></dt>
<dd><p>Binning of the spectrum image by a non-integer pixel value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>originalSpectrum</strong> (<em>numpy.array</em>) – </p></li>
<li><p><strong>scale</strong> (<em>a list</em><em> of </em><em>floats</em>) – For each dimension specify the new:old pixel ratio,
e.g. a ratio of 1 is no binning; a ratio of 2 means that each pixel in
the new spectrum is twice the size of the pixels in the old spectrum.
The length of the list should match the dimensions of the data.</p></li>
<li><p><strong>crop</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>default True</em>) – <p>When binning by a non-integer number of pixels it is likely that
the final row in each dimension contains less than the full quota to
fill one pixel.
e.g. 5*5 array binned by 2.1 will produce two rows containing 2.1
pixels and one row containing only 0.8 pixels worth. Selection of
crop=’True’ or crop=’False’ determines whether or not this ‘black’
line is cropped from the final binned array or not.</p>
<p><em>Please note that if crop=False is used, the final row in each
dimension may appear black, if a fractional number of pixels are left
over. It can be removed but has been left optional to preserve total
counts before and after binning.</em></p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>with new dimensions width/scale for each dimension in the data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.misc.array_tools._numba_histogram">
<span class="sig-prename descclassname"><span class="pre">hyperspy.misc.array_tools.</span></span><span class="sig-name descname"><span class="pre">_numba_histogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bins</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ranges</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.misc.array_tools._numba_histogram" title="Permalink to this definition"></a></dt>
<dd><p>Numba histogram computation requiring native endian datatype.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.misc.array_tools._requires_linear_rebin">
<span class="sig-prename descclassname"><span class="pre">hyperspy.misc.array_tools.</span></span><span class="sig-name descname"><span class="pre">_requires_linear_rebin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.misc.array_tools._requires_linear_rebin" title="Permalink to this definition"></a></dt>
<dd><p>Returns True if linear_rebin is required.
:param arr: numpy array to rebin
:type arr: array
:param scale: rebinning factors
:type scale: tuple</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.misc.array_tools.are_aligned">
<span class="sig-prename descclassname"><span class="pre">hyperspy.misc.array_tools.</span></span><span class="sig-name descname"><span class="pre">are_aligned</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shape1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.misc.array_tools.are_aligned" title="Permalink to this definition"></a></dt>
<dd><p>Check if two numpy arrays are aligned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>shape1</strong> (<em>iterable</em>) – </p></li>
<li><p><strong>shape2</strong> (<em>iterable</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>isaligned</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.misc.array_tools.dict2sarray">
<span class="sig-prename descclassname"><span class="pre">hyperspy.misc.array_tools.</span></span><span class="sig-name descname"><span class="pre">dict2sarray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dictionary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sarray</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.misc.array_tools.dict2sarray" title="Permalink to this definition"></a></dt>
<dd><p>Populates a struct array from a dictionary</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dictionary</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – </p></li>
<li><p><strong>sarray</strong> (<em>struct array</em><em> or </em><em>None</em>) – Either sarray or dtype must be given. If sarray is given, it is
populated from the dictionary.</p></li>
<li><p><strong>dtype</strong> (<em>None</em><em>, </em><em>numpy dtype</em><em> or </em><em>dtype list</em>) – If sarray is None, dtype must be given. If so, a new struct array
is created according to the dtype, which is then populated.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Structure array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.misc.array_tools.get_array_memory_size_in_GiB">
<span class="sig-prename descclassname"><span class="pre">hyperspy.misc.array_tools.</span></span><span class="sig-name descname"><span class="pre">get_array_memory_size_in_GiB</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.misc.array_tools.get_array_memory_size_in_GiB" title="Permalink to this definition"></a></dt>
<dd><p>Given the size and dtype returns the amount of memory that such
an array needs to allocate</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>shape</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.11)"><em>tuple</em></a>) – </p></li>
<li><p><strong>dtype</strong> (<em>data-type</em>) – The desired data-type for the array.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.misc.array_tools.get_signal_chunk_slice">
<span class="sig-prename descclassname"><span class="pre">hyperspy.misc.array_tools.</span></span><span class="sig-name descname"><span class="pre">get_signal_chunk_slice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunks</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.misc.array_tools.get_signal_chunk_slice" title="Permalink to this definition"></a></dt>
<dd><p>Convenience function returning the chunk slice in signal space containing
the specified index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.11)"><em>tuple</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Index determining the wanted chunk.</p></li>
<li><p><strong>chunks</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.11)"><em>tuple</em></a>) – Dask array chunks.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Slice containing the index x,y.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#slice" title="(in Python v3.11)">slice</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.misc.array_tools.homogenize_ndim">
<span class="sig-prename descclassname"><span class="pre">hyperspy.misc.array_tools.</span></span><span class="sig-name descname"><span class="pre">homogenize_ndim</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.misc.array_tools.homogenize_ndim" title="Permalink to this definition"></a></dt>
<dd><p>Given any number of arrays returns the same arrays
reshaped by adding facing dimensions of size 1.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.misc.array_tools.numba_closest_index_ceil">
<span class="sig-prename descclassname"><span class="pre">hyperspy.misc.array_tools.</span></span><span class="sig-name descname"><span class="pre">numba_closest_index_ceil</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">axis_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.misc.array_tools.numba_closest_index_ceil" title="Permalink to this definition"></a></dt>
<dd><p>For each value in value_array, find the closest larger value in
axis_array and return the result as a numpy array of the same shape
as value_array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>axis_array</strong> (<em>numpy array</em>) – </p></li>
<li><p><strong>value_array</strong> (<em>numpy array</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.misc.array_tools.numba_closest_index_floor">
<span class="sig-prename descclassname"><span class="pre">hyperspy.misc.array_tools.</span></span><span class="sig-name descname"><span class="pre">numba_closest_index_floor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">axis_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.misc.array_tools.numba_closest_index_floor" title="Permalink to this definition"></a></dt>
<dd><p>For each value in value_array, find the closest smaller value in
axis_array and return the result as a numpy array of the same shape
as value_array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>axis_array</strong> (<em>numpy array</em>) – </p></li>
<li><p><strong>value_array</strong> (<em>numpy array</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.misc.array_tools.numba_closest_index_round">
<span class="sig-prename descclassname"><span class="pre">hyperspy.misc.array_tools.</span></span><span class="sig-name descname"><span class="pre">numba_closest_index_round</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">axis_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.misc.array_tools.numba_closest_index_round" title="Permalink to this definition"></a></dt>
<dd><p>For each value in value_array, find the closest value in axis_array and
return the result as a numpy array of the same shape as value_array.
Use round half towards zero strategy for rounding float to interger.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>axis_array</strong> (<em>numpy array</em>) – </p></li>
<li><p><strong>value_array</strong> (<em>numpy array</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.misc.array_tools.numba_histogram">
<span class="sig-prename descclassname"><span class="pre">hyperspy.misc.array_tools.</span></span><span class="sig-name descname"><span class="pre">numba_histogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bins</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ranges</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.misc.array_tools.numba_histogram" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>numpy array</em>) – Input data. The histogram is computed over the flattened array.</p></li>
<li><p><strong>bins</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Number of bins</p></li>
<li><p><strong>ranges</strong> (<em>(</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>)</em>) – The lower and upper range of the bins.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>hist</strong> – The values of the histogram.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.misc.array_tools.rebin">
<span class="sig-prename descclassname"><span class="pre">hyperspy.misc.array_tools.</span></span><span class="sig-name descname"><span class="pre">rebin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.misc.array_tools.rebin" title="Permalink to this definition"></a></dt>
<dd><p>Rebin data into a smaller or larger array based on a linear
interpolation. Specify either a new_shape or a scale. Scale of 1 means no
binning. Scale less than one results in up-sampling.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>numpy array</em>) – The array to rebin.</p></li>
<li><p><strong>new_shape</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a><em> (of </em><em>floats</em><em> or </em><em>integer</em><em>) or </em><em>None</em>) – For each dimension specify the new_shape. This will internally be
converted into a <code class="docutils literal notranslate"><span class="pre">scale</span></code> parameter.</p></li>
<li><p><strong>scale</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><em>list</em></a><em> (of </em><em>floats</em><em> or </em><em>integer</em><em>) or </em><em>None</em>) – For each dimension, specify the new:old pixel ratio, e.g. a ratio
of 1 is no binning and a ratio of 2 means that each pixel in the new
spectrum is twice the size of the pixels in the old spectrum.
The length of the list should match the dimension of the
Signal’s underlying data array.
<em>Note : Only one of `scale` or `new_shape` should be specified,
otherwise the function will not run</em></p></li>
<li><p><strong>crop</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether or not to crop the resulting rebinned data (default is
<code class="docutils literal notranslate"><span class="pre">True</span></code>). When binning by a non-integer number of
pixels it is likely that the final row in each dimension will
contain fewer than the full quota to fill one pixel. For example,
a 5*5 array binned by 2.1 will produce two rows containing
2.1 pixels and one row containing only 0.8 pixels. Selection of
<code class="docutils literal notranslate"><span class="pre">crop=True</span></code> or <code class="docutils literal notranslate"><span class="pre">crop=False</span></code> determines whether or not this
<cite>“black”</cite> line is cropped from the final binned array or not.
<em>Please note that if ``crop=False`` is used, the final row in each
dimension may appear black if a fractional number of pixels are left
over. It can be removed but has been left to preserve total counts
before and after binning.</em></p></li>
<li><p><strong>dtype</strong> (<em>{None</em><em>, </em><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.23)"><em>numpy.dtype</em></a><em>, </em><em>&quot;same&quot;}</em>) – Specify the dtype of the output. If None, the dtype will be
determined by the behaviour of <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.sum.html#numpy.sum" title="(in NumPy v1.23)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.sum()</span></code></a>, if “same”,
the dtype will be kept the same. Default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy array</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">=</span><span class="n">rand</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span> <span class="n">b</span><span class="o">=</span><span class="n">rebin</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">scale</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">=</span><span class="n">rand</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span> <span class="n">b</span><span class="o">=</span><span class="n">rebin</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">scale</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,))</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<p>Fast <code class="docutils literal notranslate"><span class="pre">re_bin</span></code> function Adapted from scipy cookbook
If rebin function fails with error stating that the function is ‘not binned
and therefore cannot be rebinned’, add binned to axes parameters with:
&gt;&gt;&gt; s.axes_manager[axis].is_binned = True</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.misc.array_tools.round_half_away_from_zero">
<span class="sig-prename descclassname"><span class="pre">hyperspy.misc.array_tools.</span></span><span class="sig-name descname"><span class="pre">round_half_away_from_zero</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decimals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.misc.array_tools.round_half_away_from_zero" title="Permalink to this definition"></a></dt>
<dd><p>Round input array using “half away from zero” strategy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<em>ndarray</em>) – Input array.</p></li>
<li><p><strong>decimals</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Number of decimal places to round to (default: 0).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>rounded_array</strong> – An array of the same type as a, containing the rounded values.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.misc.array_tools.round_half_towards_zero">
<span class="sig-prename descclassname"><span class="pre">hyperspy.misc.array_tools.</span></span><span class="sig-name descname"><span class="pre">round_half_towards_zero</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decimals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.misc.array_tools.round_half_towards_zero" title="Permalink to this definition"></a></dt>
<dd><p>Round input array using “half towards zero” strategy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<em>ndarray</em>) – Input array.</p></li>
<li><p><strong>decimals</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>, </em><em>optional</em>) – Number of decimal places to round to (default: 0).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>rounded_array</strong> – An array of the same type as a, containing the rounded values.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyperspy.misc.array_tools.sarray2dict">
<span class="sig-prename descclassname"><span class="pre">hyperspy.misc.array_tools.</span></span><span class="sig-name descname"><span class="pre">sarray2dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dictionary</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hyperspy.misc.array_tools.sarray2dict" title="Permalink to this definition"></a></dt>
<dd><p>Converts a struct array to an ordered dictionary</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sarray</strong> (<em>struct array</em>) – </p></li>
<li><p><strong>dictionary</strong> (<em>None</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a>) – If dictionary is not None the content of sarray will be appended to the
given dictonary</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Ordered dictionary</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="hyperspy.misc.machine_learning.tools.html" class="btn btn-neutral float-left" title="hyperspy.misc.machine_learning.tools module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="hyperspy.misc.axis_tools.html" class="btn btn-neutral float-right" title="hyperspy.misc.axis_tools module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2011-2022, The HyperSpy development team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>