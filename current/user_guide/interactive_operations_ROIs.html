

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Interactive Operations and Region of Interest (ROI) &mdash; HyperSpy 1.6.4 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/hyperspy.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/toggleprompt.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Signal1D Tools" href="signal1d.html" />
    <link rel="prev" title="The Signal class" href="signal.html" />
 
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-25260850-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> HyperSpy
          

          
            
            <img src="../_static/hyperspy_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.6.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="changes.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing HyperSpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="signal.html">The Signal class</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Interactive Operations and Region of Interest (ROI)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#interactive-operations">Interactive operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#region-of-interest-roi">Region Of Interest (ROI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#slicing-using-rois">Slicing using ROIs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="signal1d.html">Signal1D Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="signal2d.html">Signal2D Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualisation.html">Data visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="mva.html">Machine learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="model.html">Model fitting</a></li>
<li class="toctree-l1"><a class="reference internal" href="eels.html">Electron Energy Loss Spectroscopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="eds.html">Energy-Dispersive X-ray Spectrometry (EDS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="dielectric_function.html">Dielectric function tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="electron_holography.html">Electron Holography</a></li>
<li class="toctree-l1"><a class="reference internal" href="io.html">Loading and saving data</a></li>
<li class="toctree-l1"><a class="reference internal" href="events.html">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="big_data.html">Working with big data</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadata_structure.html">Metadata structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/git.html">Using Git and GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/testing.html">Running and writing tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/writing_docs.html">Writing documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/coding_style.html">Coding style</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/lazy_computations.html">Tips for writing methods that work on lazy signals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/speeding_up_code.html">Speeding up code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/writing_extensions.html">Writing packages that extend HyperSpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/useful_information.html">Useful information</a></li>
</ul>
<p class="caption"><span class="caption-text">API References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/modules.html">hyperspy</a></li>
</ul>
<p class="caption"><span class="caption-text">Credits and citation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../citing.html">Citing HyperSpy</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">HyperSpy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Interactive Operations and Region of Interest (ROI)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/user_guide/interactive_operations_ROIs.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="interactive-operations-and-region-of-interest-roi">
<h1>Interactive Operations and Region of Interest (ROI)<a class="headerlink" href="#interactive-operations-and-region-of-interest-roi" title="Permalink to this headline">¶</a></h1>
<div class="section" id="interactive-operations">
<span id="interactive-label"></span><h2>Interactive operations<a class="headerlink" href="#interactive-operations" title="Permalink to this headline">¶</a></h2>
<p>The function <a class="reference internal" href="../api/hyperspy.interactive.html#hyperspy.interactive.interactive" title="hyperspy.interactive.interactive"><code class="xref py py-func docutils literal notranslate"><span class="pre">interactive()</span></code></a> simplifies the definition of
operations that are automatically updated when an event is triggered. By
default the operation is recomputed when the data or the axes of the original
signal is changed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">Signal1D</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">10.</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ssum</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">interactive</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">sum</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ssum</span><span class="o">.</span><span class="n">data</span>
<span class="go">array([45.0])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">data</span> <span class="o">/=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">data_changed</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ssum</span><span class="o">.</span><span class="n">data</span>
<span class="go">array([ 4.5])</span>
</pre></div>
</div>
<p>Interactive operations can be performed in a chain.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">Signal1D</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ssum</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">interactive</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">sum</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ssum_mean</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">interactive</span><span class="p">(</span><span class="n">ssum</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ssum_mean</span><span class="o">.</span><span class="n">data</span>
<span class="go">array([ 30.,  33.,  36.,  39.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">data</span>
<span class="go">array([[[ 0,  1,  2,  3],</span>
<span class="go">        [ 4,  5,  6,  7],</span>
<span class="go">        [ 8,  9, 10, 11]],</span>

<span class="go">       [[12, 13, 14, 15],</span>
<span class="go">        [16, 17, 18, 19],</span>
<span class="go">        [20, 21, 22, 23]]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">data</span> <span class="o">*=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">data_changed</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">s</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ssum_mean</span><span class="o">.</span><span class="n">data</span>
<span class="go">array([ 300.,  330.,  360.,  390.])</span>
</pre></div>
</div>
</div>
<div class="section" id="region-of-interest-roi">
<span id="roi-label"></span><h2>Region Of Interest (ROI)<a class="headerlink" href="#region-of-interest-roi" title="Permalink to this headline">¶</a></h2>
<p>ROIs can be defined to select part of any compatible signal and may be applied
either to the navigation or to the signal axes. A number of different ROIs are
available:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../api/hyperspy.roi.html#hyperspy.roi.Point1DROI" title="hyperspy.roi.Point1DROI"><code class="xref py py-class docutils literal notranslate"><span class="pre">Point1DROI</span></code></a></p></li>
<li><p><a class="reference internal" href="../api/hyperspy.roi.html#hyperspy.roi.Point2DROI" title="hyperspy.roi.Point2DROI"><code class="xref py py-class docutils literal notranslate"><span class="pre">Point2DROI</span></code></a></p></li>
<li><p><a class="reference internal" href="../api/hyperspy.roi.html#hyperspy.roi.SpanROI" title="hyperspy.roi.SpanROI"><code class="xref py py-class docutils literal notranslate"><span class="pre">SpanROI</span></code></a></p></li>
<li><p><a class="reference internal" href="../api/hyperspy.roi.html#hyperspy.roi.RectangularROI" title="hyperspy.roi.RectangularROI"><code class="xref py py-class docutils literal notranslate"><span class="pre">RectangularROI</span></code></a></p></li>
<li><p><a class="reference internal" href="../api/hyperspy.roi.html#hyperspy.roi.CircleROI" title="hyperspy.roi.CircleROI"><code class="xref py py-class docutils literal notranslate"><span class="pre">CircleROI</span></code></a></p></li>
<li><p><a class="reference internal" href="../api/hyperspy.roi.html#hyperspy.roi.Line2DROI" title="hyperspy.roi.Line2DROI"><code class="xref py py-class docutils literal notranslate"><span class="pre">Line2DROI</span></code></a></p></li>
</ul>
<p>Once created, an ROI can be applied to the signal:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">Signal1D</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">im</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">Signal2D</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">roi</span><span class="o">.</span><span class="n">RectangularROI</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sr</span> <span class="o">=</span> <span class="n">roi</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sr</span>
<span class="go">&lt;Signal1D, title: , dimensions: (4, 3|10)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">imr</span> <span class="o">=</span> <span class="n">roi</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">imr</span>
<span class="go">&lt;Signal2D, title: , dimensions: (|4, 3)&gt;</span>
</pre></div>
</div>
<p>ROIs can also be used <a class="reference internal" href="#interactive-label"><span class="std std-ref">interactively</span></a> with widgets.
The following example shows how to interactively apply ROIs to an image. Note
that <em>it is necessary</em> to plot the signal onto which the widgets will be
added before calling <a class="reference internal" href="../api/hyperspy.roi.html#hyperspy.roi.BaseInteractiveROI.interactive" title="hyperspy.roi.BaseInteractiveROI.interactive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">interactive()</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">scipy.misc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">im</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">Signal2D</span><span class="p">(</span><span class="n">scipy</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">ascent</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rectangular_roi</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">roi</span><span class="o">.</span><span class="n">RectangularROI</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">top</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line_roi</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">roi</span><span class="o">.</span><span class="n">Line2DROI</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point_roi</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">roi</span><span class="o">.</span><span class="n">Point2DROI</span><span class="p">(</span><span class="mi">256</span><span class="p">,</span> <span class="mi">256</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">im</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi2D</span> <span class="o">=</span> <span class="n">rectangular_roi</span><span class="o">.</span><span class="n">interactive</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi1D</span> <span class="o">=</span> <span class="n">line_roi</span><span class="o">.</span><span class="n">interactive</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;yellow&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi0D</span> <span class="o">=</span> <span class="n">point_roi</span><span class="o">.</span><span class="n">interactive</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/image_with_rois.png"><img alt="../_images/image_with_rois.png" src="../_images/image_with_rois.png" style="width: 500px;" /></a>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/roi1d.png"><img alt="../_images/roi1d.png" src="../_images/roi1d.png" style="width: 500px;" /></a>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/roi2d.png"><img alt="../_images/roi2d.png" src="../_images/roi2d.png" style="width: 500px;" /></a>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Depending on your screen and display settings, it can be difficult to <cite>pick</cite>
or manipulate widgets and you can try to change the pick tolerance in
the <a class="reference internal" href="getting_started.html#configuring-hyperspy-label"><span class="std std-ref">HyperSpy plot preferences</span></a>.
Typically, using a 4K resolution with a small scaling factor (&lt;150 %), setting
the pick tolerance to 15 instead of 7.5 makes the widgets easier to manipulate.</p>
</div>
<p>Notably, since ROIs are independent from the signals they sub-select, the widget
can be plotted on a different signal altogether.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">scipy.misc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">im</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">Signal2D</span><span class="p">(</span><span class="n">scipy</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">ascent</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">Signal1D</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">roi</span><span class="o">.</span><span class="n">RectangularROI</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mi">77</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span> <span class="c1"># plot signal to have where to display the widget</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">imr</span> <span class="o">=</span> <span class="n">roi</span><span class="o">.</span><span class="n">interactive</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">navigation_signal</span><span class="o">=</span><span class="n">s</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi</span><span class="p">(</span><span class="n">im</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<p>ROIs are implemented in terms of physical coordinates and not pixels, so with
proper calibration will always point to the same region.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/random_image_with_rect_roi.png"><img alt="../_images/random_image_with_rect_roi.png" src="../_images/random_image_with_rect_roi.png" style="width: 500px;" /></a>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/random_image_with_rect_roi_spectrum.png"><img alt="../_images/random_image_with_rect_roi_spectrum.png" src="../_images/random_image_with_rect_roi_spectrum.png" style="width: 500px;" /></a>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/roi2d.png"><img alt="../_images/roi2d.png" src="../_images/roi2d.png" style="width: 500px;" /></a>
</div>
<p>And of course, as all interactive operations, interactive ROIs are chainable.
The following example shows how to display interactively the histogram of a
rectangular ROI. Notice how we customise the default event connections in
order to increase responsiveness.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">scipy.misc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">im</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">Signal2D</span><span class="p">(</span><span class="n">scipy</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">ascent</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">im</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">roi</span><span class="o">.</span><span class="n">RectangularROI</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">im_roi</span> <span class="o">=</span> <span class="n">roi</span><span class="o">.</span><span class="n">interactive</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi_hist</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">interactive</span><span class="p">(</span><span class="n">im_roi</span><span class="o">.</span><span class="n">get_histogram</span><span class="p">,</span>
<span class="gp">... </span>                          <span class="n">event</span><span class="o">=</span><span class="n">roi</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">changed</span><span class="p">,</span>
<span class="go">                              bins=150, # Set number of bins for `get_histogram`</span>
<span class="gp">... </span>                          <span class="n">recompute_out_event</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi_hist</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/image_with_rect_roi.gif"><img alt="../_images/image_with_rect_roi.gif" src="../_images/image_with_rect_roi.gif" style="width: 100%;" /></a>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3: </span>ROIs can be used in place of slices when indexing and to define a
signal range in functions taken a <code class="docutils literal notranslate"><span class="pre">signal_range</span></code> argument.</p>
</div>
<p>All ROIs have a <code class="xref py py-meth docutils literal notranslate"><span class="pre">gui()</span></code> method that displays an user interface if
a hyperspy GUI is installed (currently only works with the
<code class="docutils literal notranslate"><span class="pre">hyperspy_gui_ipywidgets</span></code> GUI), enabling precise control of the ROI
parameters:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># continuing from above:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi</span><span class="o">.</span><span class="n">gui</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/roi_gui_control.gif"><img alt="../_images/roi_gui_control.gif" src="../_images/roi_gui_control.gif" style="width: 100%;" /></a>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4: </span><a class="reference internal" href="../api/hyperspy.roi.html#hyperspy.roi.Line2DROI.angle" title="hyperspy.roi.Line2DROI.angle"><code class="xref py py-meth docutils literal notranslate"><span class="pre">angle()</span></code></a> can be used to calculate an angle between
ROI line and one of the axes providing its name through optional argument <code class="docutils literal notranslate"><span class="pre">axis</span></code>:</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">scipy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">holo</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">example_signals</span><span class="o">.</span><span class="n">object_hologram</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">roi</span><span class="o">.</span><span class="n">Line2DROI</span><span class="p">(</span><span class="n">x1</span><span class="o">=</span><span class="mf">465.577</span><span class="p">,</span> <span class="n">y1</span><span class="o">=</span><span class="mf">445.15</span><span class="p">,</span> <span class="n">x2</span><span class="o">=</span><span class="mf">169.4</span><span class="p">,</span> <span class="n">y2</span><span class="o">=</span><span class="mf">387.731</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">holo</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ss</span> <span class="o">=</span> <span class="n">roi</span><span class="o">.</span><span class="n">interactive</span><span class="p">(</span><span class="n">holo</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/roi_line2d_holo.png"><img alt="../_images/roi_line2d_holo.png" src="../_images/roi_line2d_holo.png" style="width: 500px;" /></a>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">roi</span><span class="o">.</span><span class="n">angle</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>
<span class="go">-100.97166759025453</span>
</pre></div>
</div>
<p>The default output of the method is in degrees, though radians can be selected
as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">roi</span><span class="o">.</span><span class="n">angle</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;radians&#39;</span><span class="p">)</span>
<span class="go">-1.7622880506791903</span>
</pre></div>
</div>
<p>Conveniently, <a class="reference internal" href="../api/hyperspy.roi.html#hyperspy.roi.Line2DROI.angle" title="hyperspy.roi.Line2DROI.angle"><code class="xref py py-meth docutils literal notranslate"><span class="pre">angle()</span></code></a> can be used to rotate an image to
align selected features with respect to vertical or horizontal axis:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">holo</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">scipy</span><span class="o">.</span><span class="n">ndimage</span><span class="o">.</span><span class="n">rotate</span><span class="p">,</span> <span class="n">angle</span><span class="o">=</span><span class="n">roi</span><span class="o">.</span><span class="n">angle</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">),</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/roi_line2d_rotate.png"><img alt="../_images/roi_line2d_rotate.png" src="../_images/roi_line2d_rotate.png" style="width: 500px;" /></a>
</div>
</div>
<div class="section" id="slicing-using-rois">
<span id="roi-slice-label"></span><h2>Slicing using ROIs<a class="headerlink" href="#slicing-using-rois" title="Permalink to this headline">¶</a></h2>
<p>ROIs can be used in place of slices when indexing. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">example_signals</span><span class="o">.</span><span class="n">EDS_TEM_Spectrum</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">roi</span><span class="o">.</span><span class="n">SpanROI</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sc</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">isig</span><span class="p">[</span><span class="n">roi</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">im</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">example_signals</span><span class="o">.</span><span class="n">object_hologram</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">roi</span><span class="o">.</span><span class="n">RectangularROI</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mf">460.</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mi">560</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">imc</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">isig</span><span class="p">[</span><span class="n">roi</span><span class="p">]</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3: </span><code class="xref py py-meth docutils literal notranslate"><span class="pre">gui()</span></code> method.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6: </span>New <code class="xref py py-meth docutils literal notranslate"><span class="pre">__getitem__()</span></code> method for all ROIs.</p>
</div>
<p>In addition the following all ROIs have a py:meth:<cite>__getitem__</cite> method that enables
using them in place of tuples.
For example, the method <code class="xref py py-meth docutils literal notranslate"><span class="pre">align2D()</span></code> takes a <code class="docutils literal notranslate"><span class="pre">roi</span></code>
argument with the left, right, top, bottom coordinates of the ROI.
Handily, we can pass a <a class="reference internal" href="../api/hyperspy.roi.html#hyperspy.roi.RectangularROI" title="hyperspy.roi.RectangularROI"><code class="xref py py-class docutils literal notranslate"><span class="pre">RectangularROI</span></code></a> ROI instead.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">hyperspy.api</span> <span class="k">as</span> <span class="nn">hs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">im</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">Signal2D</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi</span> <span class="o">=</span> <span class="n">hs</span><span class="o">.</span><span class="n">roi</span><span class="o">.</span><span class="n">RectangularROI</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">tuple</span><span class="p">(</span><span class="n">roi</span><span class="p">)</span>
<span class="go">(2.0, 10.0, 0.0, 5.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">im</span><span class="o">.</span><span class="n">align2D</span><span class="p">(</span><span class="n">roi</span><span class="o">=</span><span class="n">roi</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="signal1d.html" class="btn btn-neutral float-right" title="Signal1D Tools" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="signal.html" class="btn btn-neutral float-left" title="The Signal class" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2011-2021, The HyperSpy development team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>